{"title":"Models Implemented","markdown":{"headingText":"Models Implemented","headingAttr":{"id":"sec-models-implemented","classes":[],"keyvalue":[]},"containsRefs":false,"markdown":"\n```{python importsBlock}\nimport pandas as pd, numpy as np, matplotlib.pyplot as plt\nimport seaborn as sns\n# import pingouin as pg\n# from statsmodels.stats.multicomp import pairwise_tukeyhsd\n# import statsmodels.api as sm\n# from wordcloud import WordCloud\n# import pingouin as pg \nfrom sklearn import tree\nfrom sklearn.metrics import (\n    accuracy_score,f1_score,\n    precision_score,recall_score, \n    confusion_matrix, ConfusionMatrixDisplay,\n)\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.neighbors import KNeighborsClassifier\nfrom sklearn import svm\nimport graphviz\n\n\nproduct_data = pd.read_csv('../data/master_product_list.csv')\n#review_data = pd.read_csv('../data/combined_review_table.csv')\nreview_data = pd.read_csv('../data/all_reviews_without_unicode.csv')\nreview_data_base = pd.DataFrame(review_data)\nreview_data = pd.DataFrame(\n    review_data[\n        (review_data['productID'].isin([1,2,3,5,6,8,9,11,12,13,14,15])) &\n        (review_data['review_lang']=='en')\n    ]\n)\n   \nreview_metrics = pd.read_csv('../data/combined_review_metrics.csv')\n\ntest_metrics = pd.DataFrame(\n    {\n        'Model':[],\n        'Accuracy':[],\n        'F1':[],\n        'Precision':[],\n        'Recall':[]\n    }\n)\n\n```\n\nHere's where we'll list out our models\n\n<!--Note from Patrick: \n\n\nStarted building some models based upon what's been taught in class.\n\nThe below are simple classification models, examining whether a review comment is or is not useful (added a boolean to say it's useful if it has one or more votes for being useful). \n\nMay still need to look at MLR, haven't built or run it yet.  May be good to look at this in conjunction with the Logistic Regression.\n\nRan a decision tree\n\n    * most impactful factors (in order) appear to be review star rating, review length, polarity\n\n    * may need to include product subjectivity as well\n\nRan Logistic Regression (performs well)\n\n\n\nRan K-Nearest neighbors\n\nRan Support Vector Machine\n\n\n\nCurrent modeling examines doing each of these algorithms against the items that match across all websites.\n\nEach of these models runs may need to be modified such that they're also run against the external item(s).\n\nEach of these models may also need some data modifications to include new variables, and to seek ways and means to avoid overfitting.\n\n -->\n\n## Decision Tree\n```{python data}\nreview_data_base.head()\nreview_data_base['is_helpful'] = review_data_base['review_helpful_votes'] > 0\nX,y = [review_data_base[\n    ['review_star_rating','verified_purchase','review_subjectivity',\n    'review_polarity','review_length']\n],review_data_base['is_helpful'].astype(int)]\n\nt = pd.DataFrame(review_data_base.dropna())\n\n```\n\n\n```{python dTreeClassifier}\n\n\n## research how to replace tree headers with\n## names and values\n\nX_train,X_test,y_train,y_test = train_test_split(\n    X,y,test_size=0.2,random_state=1337\n)\n#clf = tree.DecisionTreeClassifier(criterion=)\nclf = tree.DecisionTreeClassifier(criterion = 'entropy',max_depth=6)\nclf=clf.fit(X_train,y_train)\n#tree.plot_tree(clf)\ndot_data = tree.export_graphviz(clf,out_file=None)\n#graph = graphviz.Source(dot_data)\n#display(graph)\n\ny_pred = clf.predict(X_test)\ntest_metrics.loc[len(test_metrics)] = {\n    'Model':'Decision Tree',\n    'Accuracy':accuracy_score(y_test,y_pred),\n    'F1':f1_score(y_test,y_pred),\n    'Precision':precision_score(y_test,y_pred),\n    'Recall':recall_score(y_test,y_pred)\n}\n\nConfusionMatrixDisplay(confusion_matrix(y_test,y_pred)).plot()\n\ndisplay(test_metrics)\n\n```\n\n## Logistic Regression\n\n```{python LogisitcRegressionClassifier}\n### extract parameters...\n\nmod = LogisticRegression()\n\n#reduce the sample size to examine reduction in \n#overfit\n\n\nX,y = [t[\n    ['review_star_rating','verified_purchase','review_subjectivity',\n    'review_polarity','review_length']\n],t['is_helpful']]\n\nX_train,X_test,y_train,y_test = train_test_split(\n    X,\n    y,\n    test_size=0.8,\n    random_state=1337\n)\n\nlog_reg = mod.fit(X_train,y_train)\ny_pred = mod.predict(X_test)\n\ntest_metrics.loc[len(test_metrics)] = {\n    'Model':'Logistic Regression',\n    'Accuracy':accuracy_score(y_test,y_pred),\n    'F1':f1_score(y_test,y_pred),\n    'Precision':precision_score(y_test,y_pred),\n    'Recall':recall_score(y_test,y_pred)\n}\n\nConfusionMatrixDisplay(confusion_matrix(y_test,y_pred)).plot()\n\ndisplay(test_metrics)\n```\n\n\n## KNN?\n\n```{python KNearestNeighborsClassifier}\n# X,y = [review_data_base[\n#     ['review_star_rating','verified_purchase','review_subjectivity',\n#     'review_polarity','review_length']\n# ],review_data_base['is_helpful'].astype(int)]\n\n# X_train,X_test,y_train,y_test = train_test_split(\n#     X,\n#     y,\n#     test_size=0.8,\n#     random_state=1337\n# )\nknn = KNeighborsClassifier(n_neighbors=5)\nknn.fit(X_train,y_train)\ny_pred = knn.predict(X_test)\ntest_metrics.loc[len(test_metrics)] = {\n    'Model':'K-Nearest Neighbors',\n    'Accuracy':accuracy_score(y_test,y_pred),\n    'F1':f1_score(y_test,y_pred),\n    'Precision':precision_score(y_test,y_pred),\n    'Recall':recall_score(y_test,y_pred)\n}\nConfusionMatrixDisplay(confusion_matrix(y_test,y_pred)).plot()\n\ndisplay(test_metrics)\n\n```\n\n## SVM Analysis\n\n```{python SVMClassifier}\nspt_vector = svm.SVC(kernel='linear').fit(X_train,y_train)\n\ny_pred = spt_vector.predict(X_test)\n\ntest_metrics.loc[len(test_metrics)] = {\n    'Model':'Support Vector Machine',\n    'Accuracy':accuracy_score(y_test,y_pred),\n    'F1':f1_score(y_test,y_pred),\n    'Precision':precision_score(y_test,y_pred),\n    'Recall':recall_score(y_test,y_pred)\n}\n\nConfusionMatrixDisplay(confusion_matrix(y_test,y_pred)).plot()\n\ndisplay(test_metrics)\n```\n\n```{python SVMC2}\nother_data = pd.DataFrame(review_data_base[(~review_data_base['productID'].isin([1,2,3,5,6,8,9,11,12,13,14,15]))&(review_data_base['review_lang']=='en')])\nprint(len(other_data))\nX = other_data[\n    ['review_star_rating','verified_purchase','review_subjectivity',\n     'review_polarity','review_length']\n]\ny_test = other_data['is_helpful']\ny_pred = spt_vector.predict(X)\n\ntest_metrics.loc[len(test_metrics)] = {\n    'Model':'Support Vector Machine2',\n    'Accuracy':accuracy_score(y_test,y_pred),\n    'F1':f1_score(y_test,y_pred),\n    'Precision':precision_score(y_test,y_pred),\n    'Recall':recall_score(y_test,y_pred)\n}\n\nConfusionMatrixDisplay(confusion_matrix(y_test,y_pred)).plot()\n\ndisplay(test_metrics)\n```\n\n## Examined Model - Multiple Linear Regression\n\n### Base Model \n\n### Model Modifications\n\n## Examined Model - Decision Tree\n\n## Examined Model - Naive Bayes\n\n## Examined Model - ?\n\n<!--* Perceived Usefulness of Product Reviews\n\n    - Modeling for search vs. experience goods as \"mitigations\" on reviews, examining their impact on perceived review usefulness\n\n* Wealth of Data Paper on Customer Evaulation\n\n    - Examination of 'Vine' customers from Amazon\n\n    - Don't think that BestBuy or Target have the same.\n\n    - Scope of this would be limited to Amazon, combining research from Perceived Usefulness paper (i.e. their modeling) with a customer \"trustworthiness\" score for Amazon Vine customers\n\n        - May have challenges identifying products with Vine customers\n\n        - Should also have a look at \"verified purchase\" customers, too.\n\n    - Weaknesses (from authors)\n\n        - Their NLP instance wasn't well trained for fully accurate\n\n        - Their weighting system was manually (i.e. arbitrarily) set as opposed to having a labeled dataset\n\n        - Can we fix these problems? If so - what data is needed?\n\n    \n\n## Potential Model for Search vs. Experience Weight (scale of 0-1)\n\n### Jaccard Similarity Measure\n\nhttps://www.sciencedirect.com/science/article/pii/S1567422318300450\n\n* Can be used to produce a similarity between two items on a scale of 0 to 1\n\n* May be able to use this for evaluation of a novel item against a pure-search good vs. a pure-experience good.\n\n    * May require additional calculation / computation between these two values - maybe its arithmetic or harmonic mean between search and experience\n\n    * Using that, we could potentially produce a weight.\n\n    * Authors models\n\n        * Model 1: $\\text{Perceived Usefulness} = \\beta_0 + \\beta_1 \\cdot \\text{Review Content} + \\beta_2 \\cdot \\text{Review Length} + \\beta_3\\cdot \\text{Star Rating} + \\beta_4 \\cdot \\text{Total Votes Received} + \\epsilon_1$\n\n        * Model 2 (product type as a moderator): $\\text{Perceived Usefulness} = \\beta_0 + \\beta_1 \\cdot \\text{Review Content} + \\beta_2 \\cdot \\text{Review Length} + \\beta_3\\cdot \\text{Star Rating} + \\beta_4 \\cdot \\text{Total Votes Received} + \\beta_5 \\cdot \\text{Digital Music} + \\beta_6 \\cdot \\text{Video Game} + \\beta_7 \\cdot \\text{Review Content}\\cdot \\text{ Digital Music} + \\beta_8\\cdot\\text{Review Content}\\cdot\\text{ Video Game} + \\epsilon_2$\n\n        * Our proposition #1 (may require some modification)\n$$\n\\text{Perceived Usefulness} = \\beta_0 + \\beta_1 \\cdot \\text{Review Content} + \\beta_2 \\cdot \\text{Review Length} + \\beta_3\\cdot \\text{Star Rating} + \\beta_4 \\cdot \\text{Total Votes Received} + \\gamma\\cdot\\text{Review Content}\n$$\n\nor\n\n$$\n\\text{Perceived Usefulness} = \\beta_0 + \\gamma\\cdot\\beta_1\\cdot\\text{Review Content} + \\beta_2 \\cdot \\text{Review Length} + \\beta_3\\cdot \\text{Star Rating} + \\beta_4 \\cdot \\text{Total Votes Received}\n$$\n\n* Where $\\gamma$ is the Jaccard Similarity Score between a given product and elements we are identifying as \"pure\" experience and \"pure\" search good.\n\n* Operationalizaton of Jaccard Similarity score Variable (i.e. inputs)\n\n    * Search good: those with attributes that can be evaluated prior to purchase or consumption. Consumers rely on prior experience, direct product inspection and other information search activities to locate information that assists in the evaluation process. Most products fall into the search goods category (e.g. clothing, office stationery, home furnishings).\n\n    * Number of measurement specifications?\n\n    * comment/review information?\n\n    * What else could we gather that could be considered a \"universal\" tangible or intangible feature from a product online?  They need to be applicable to both search and experience goods.\n\n* Experience good: those that can be accurately evaluated only after the product has been purchased and experienced. Many personal services fall into this category (e.g. restaurant, hairdresser, beauty salon, theme park, travel, holiday).\n\n    * subjective descriptiveness vs. \n\n    * comment/review information?\n\n* Are there other methods aside from Jaccard Similarity? -->\n\n## Model Comparison\n\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":false,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","number-sections":true,"output-file":"models implemented.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.4.549","bibliography":["refs.bib"],"nocite":"@*\n","theme":["cosmo","custom.scss"],"page-layout":"full","smooth-scroll":true,"citations-hover":true,"link-citations":true,"grid":{"body-width":"1000px","sidebar-width":"150px"},"quarto-required":">= 1.4.0"},"extensions":{"book":{"multiFile":true}}},"pdf":{"identifier":{"display-name":"PDF","target-format":"pdf","base-format":"pdf"},"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":false,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":"../docs","link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"xelatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","toc":true,"output-file":"models implemented.pdf"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"block-headings":true,"bibliography":["refs.bib"],"nocite":"@*\n","quarto-required":">= 1.4.0","documentclass":"scrreprt","number-depth":4,"geometry":["margin=0.5in"],"link-citations":true,"header-includes":["\\usepackage{float}","\\usepackage{booktabs, caption, longtable, colortbl, array}","\\floatplacement{table}{H}","\\floatplacement{image}{H}"],"hyperrefoptions":["linktoc=all"]},"extensions":{"book":{"selfContainedOutput":true}}}},"projectFormats":["html","pdf"]}