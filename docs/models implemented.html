<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>CSCI 5302 - Final Project - 3&nbsp; Models Implemented</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./conclusion.html" rel="next">
<link href="./data.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./models implemented.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Models Implemented</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">CSCI 5302 - Final Project</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/pconnell/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="./CSCI_5302_Final_Report.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data Collection and Exploration</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./models implemented.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Models Implemented</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#included-variables" id="toc-included-variables" class="nav-link active" data-scroll-target="#included-variables"><span class="header-section-number">3.1</span> Included Variables</a></li>
  <li><a href="#data-adjustments" id="toc-data-adjustments" class="nav-link" data-scroll-target="#data-adjustments"><span class="header-section-number">3.2</span> Data Adjustments</a>
  <ul class="collapse">
  <li><a href="#dimensionality-reduction" id="toc-dimensionality-reduction" class="nav-link" data-scroll-target="#dimensionality-reduction"><span class="header-section-number">3.2.1</span> Dimensionality Reduction</a></li>
  <li><a href="#training-data" id="toc-training-data" class="nav-link" data-scroll-target="#training-data"><span class="header-section-number">3.2.2</span> Training Data</a></li>
  <li><a href="#testing-data" id="toc-testing-data" class="nav-link" data-scroll-target="#testing-data"><span class="header-section-number">3.2.3</span> Testing Data</a></li>
  <li><a href="#desired-outcomes-and-objectives" id="toc-desired-outcomes-and-objectives" class="nav-link" data-scroll-target="#desired-outcomes-and-objectives"><span class="header-section-number">3.2.4</span> Desired Outcomes and Objectives</a></li>
  </ul></li>
  <li><a href="#examination-of-the-original-multiple-linear-regression" id="toc-examination-of-the-original-multiple-linear-regression" class="nav-link" data-scroll-target="#examination-of-the-original-multiple-linear-regression"><span class="header-section-number">3.3</span> Examination of the Original Multiple Linear Regression</a>
  <ul class="collapse">
  <li><a href="#linear-model-construction" id="toc-linear-model-construction" class="nav-link" data-scroll-target="#linear-model-construction"><span class="header-section-number">3.3.1</span> Linear Model Construction</a></li>
  <li><a href="#inspection-of-linear-model-assumptions" id="toc-inspection-of-linear-model-assumptions" class="nav-link" data-scroll-target="#inspection-of-linear-model-assumptions"><span class="header-section-number">3.3.2</span> Inspection of Linear Model Assumptions</a></li>
  </ul></li>
  <li><a href="#logistic-regression-classification" id="toc-logistic-regression-classification" class="nav-link" data-scroll-target="#logistic-regression-classification"><span class="header-section-number">3.4</span> Logistic Regression Classification</a>
  <ul class="collapse">
  <li><a href="#hyperparameter-tuning" id="toc-hyperparameter-tuning" class="nav-link" data-scroll-target="#hyperparameter-tuning"><span class="header-section-number">3.4.1</span> Hyperparameter Tuning</a></li>
  <li><a href="#oversampling-techniques" id="toc-oversampling-techniques" class="nav-link" data-scroll-target="#oversampling-techniques"><span class="header-section-number">3.4.2</span> Oversampling techniques</a></li>
  <li><a href="#logistic-regression-test-results" id="toc-logistic-regression-test-results" class="nav-link" data-scroll-target="#logistic-regression-test-results"><span class="header-section-number">3.4.3</span> Logistic Regression Test Results</a></li>
  </ul></li>
  <li><a href="#k-nearest-neighbors-classification" id="toc-k-nearest-neighbors-classification" class="nav-link" data-scroll-target="#k-nearest-neighbors-classification"><span class="header-section-number">3.5</span> K-Nearest Neighbors Classification</a>
  <ul class="collapse">
  <li><a href="#hyperparameter-tuning-1" id="toc-hyperparameter-tuning-1" class="nav-link" data-scroll-target="#hyperparameter-tuning-1"><span class="header-section-number">3.5.1</span> Hyperparameter Tuning</a></li>
  <li><a href="#knn-test-results" id="toc-knn-test-results" class="nav-link" data-scroll-target="#knn-test-results"><span class="header-section-number">3.5.2</span> KNN Test Results</a></li>
  </ul></li>
  <li><a href="#support-vector-machine-classification" id="toc-support-vector-machine-classification" class="nav-link" data-scroll-target="#support-vector-machine-classification"><span class="header-section-number">3.6</span> Support Vector Machine Classification</a>
  <ul class="collapse">
  <li><a href="#hyperparameter-tuning-2" id="toc-hyperparameter-tuning-2" class="nav-link" data-scroll-target="#hyperparameter-tuning-2"><span class="header-section-number">3.6.1</span> Hyperparameter Tuning</a></li>
  <li><a href="#svm-test-results" id="toc-svm-test-results" class="nav-link" data-scroll-target="#svm-test-results"><span class="header-section-number">3.6.2</span> SVM Test Results</a></li>
  </ul></li>
  <li><a href="#model-comparison" id="toc-model-comparison" class="nav-link" data-scroll-target="#model-comparison"><span class="header-section-number">3.7</span> Model Comparison</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-models-implemented" class="quarto-section-identifier"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Models Implemented</span></span></h1>
</div>



<div class="quarto-title-meta column-body">

    
  
    
  </div>
  


</header>


<p>In our modeling of the collected data, we seek to investigate several models for the generalization of the work performed by <span class="citation" data-cites="percUse">Guha Majumder, Dutta Gupta, and Paul (<a href="references.html#ref-percUse" role="doc-biblioref">2022</a>)</span>.</p>
<p>We will examine, compare, and contrast the use of the following models:</p>
<ul>
<li><p>Multiple Linear Regression Prediction</p></li>
<li><p>Logistic Regression Classification</p></li>
<li><p>K-Nearest Neighbors Classification</p></li>
<li><p>Support Vector Machine Classification</p></li>
</ul>
<section id="included-variables" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="included-variables"><span class="header-section-number">3.1</span> Included Variables</h2>
<div class="cell" data-execution_count="6">
<div id="tbl-var-selection" class="cell quarto-float anchored" data-execution_count="6">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-var-selection-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.1: Selected Variables for Model Training
</figcaption>
<div aria-describedby="tbl-var-selection-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="6">
<style type="text/css">
</style>

<table id="T_c3481" class="do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_c3481_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Variable</th>
<th id="T_c3481_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Pre-Transformation Type</th>
<th id="T_c3481_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">Post-Transformation Type</th>
<th id="T_c3481_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">Purpose</th>
<th id="T_c3481_level0_col4" class="col_heading level0 col4" data-quarto-table-cell-role="th">Reason for Inclusion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_c3481_row0_col0" class="data row0 col0">review_star_rating</td>
<td id="T_c3481_row0_col1" class="data row0 col1">int</td>
<td id="T_c3481_row0_col2" class="data row0 col2">PCA scaled float</td>
<td id="T_c3481_row0_col3" class="data row0 col3">feature</td>
<td id="T_c3481_row0_col4" class="data row0 col4">literature survey</td>
</tr>
<tr class="even">
<td id="T_c3481_row1_col0" class="data row1 col0">review_subjectivity</td>
<td id="T_c3481_row1_col1" class="data row1 col1">float</td>
<td id="T_c3481_row1_col2" class="data row1 col2">PCA scaled float</td>
<td id="T_c3481_row1_col3" class="data row1 col3">feature</td>
<td id="T_c3481_row1_col4" class="data row1 col4">literature survey</td>
</tr>
<tr class="odd">
<td id="T_c3481_row2_col0" class="data row2 col0">review_polarity</td>
<td id="T_c3481_row2_col1" class="data row2 col1">float</td>
<td id="T_c3481_row2_col2" class="data row2 col2">PCA scaled float</td>
<td id="T_c3481_row2_col3" class="data row2 col3">feature</td>
<td id="T_c3481_row2_col4" class="data row2 col4">literature survey</td>
</tr>
<tr class="even">
<td id="T_c3481_row3_col0" class="data row3 col0">review_length</td>
<td id="T_c3481_row3_col1" class="data row3 col1">int</td>
<td id="T_c3481_row3_col2" class="data row3 col2">PCA scaled float</td>
<td id="T_c3481_row3_col3" class="data row3 col3">feature</td>
<td id="T_c3481_row3_col4" class="data row3 col4">literature survey</td>
</tr>
<tr class="odd">
<td id="T_c3481_row4_col0" class="data row4 col0">prod_subjectivity</td>
<td id="T_c3481_row4_col1" class="data row4 col1">float</td>
<td id="T_c3481_row4_col2" class="data row4 col2">PCA scaled float</td>
<td id="T_c3481_row4_col3" class="data row4 col3">feature</td>
<td id="T_c3481_row4_col4" class="data row4 col4">intuition</td>
</tr>
<tr class="even">
<td id="T_c3481_row5_col0" class="data row5 col0">total_star_rating</td>
<td id="T_c3481_row5_col1" class="data row5 col1">float</td>
<td id="T_c3481_row5_col2" class="data row5 col2">PCA scaled float</td>
<td id="T_c3481_row5_col3" class="data row5 col3">feature</td>
<td id="T_c3481_row5_col4" class="data row5 col4">literature survey</td>
</tr>
<tr class="odd">
<td id="T_c3481_row6_col0" class="data row6 col0">site</td>
<td id="T_c3481_row6_col1" class="data row6 col1">dummy float</td>
<td id="T_c3481_row6_col2" class="data row6 col2">PCA scaled float</td>
<td id="T_c3481_row6_col3" class="data row6 col3">feature</td>
<td id="T_c3481_row6_col4" class="data row6 col4">intuition from EDA</td>
</tr>
<tr class="even">
<td id="T_c3481_row7_col0" class="data row7 col0">review_helpful_votes</td>
<td id="T_c3481_row7_col1" class="data row7 col1">int</td>
<td id="T_c3481_row7_col2" class="data row7 col2">PCA scaled float</td>
<td id="T_c3481_row7_col3" class="data row7 col3">response</td>
<td id="T_c3481_row7_col4" class="data row7 col4">literature survey</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="data-adjustments" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="data-adjustments"><span class="header-section-number">3.2</span> Data Adjustments</h2>
<p>As noted in our exploratory data analysis, each individual site has statistically significant differences in key variables we’re considering in our modeling. To mitigate the potential for under or overfitting, and misrepresentation due to variable scale we perform the following transformations to our data:</p>
<!--NOTE - need information here on specific variables under consideration for our modeling-->
<ol type="1">
<li><p>Variable outlier adjustment. We noted in our EDA that each of the e-commerce platforms had high volumes of outliers with respect to the inter-quartile range. We applied a transformation to our data to map any outlier variable value on a per-website basis from its value to <span class="math inline">\(\mu+3\cdot sd(\text{variable})\)</span> for high-end outliers, and <span class="math inline">\(\mu-3\cdot sd(\text{variable})\)</span> for low-end outliers. In the event that either of these values exceeded the minimum or maximum value of the dataset, we mapped the value to the minimum or maximum accordingly.</p></li>
<li><p>Standard scaling of variables. After adjusting outliers, we re-mapped all of our feature variables to be on the scale of the standard normal distribution <span class="math inline">\(N\sim(0,1)\)</span></p></li>
<li><p>Response variable transformation to binary value. We denoted a single useful vote as meaning that the review was useful to customers, and mapped the value to True/1, and False/0 otherwise.</p></li>
</ol>
<p>Here is a sample (first 10 observations) of our data prior to the transformation:</p>
<div class="cell" data-execution_count="7">
<div id="tbl-pre-xform-data" class="cell quarto-float anchored" data-execution_count="7">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-pre-xform-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.2: Data (pre-transformation)
</figcaption>
<div aria-describedby="tbl-pre-xform-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="7">
<style type="text/css">
</style>

<table id="T_8909a" class="do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_8909a_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">review_star_rating</th>
<th id="T_8909a_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">review_subjectivity</th>
<th id="T_8909a_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">review_polarity</th>
<th id="T_8909a_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">review_length</th>
<th id="T_8909a_level0_col4" class="col_heading level0 col4" data-quarto-table-cell-role="th">prod_subjectivity</th>
<th id="T_8909a_level0_col5" class="col_heading level0 col5" data-quarto-table-cell-role="th">total_star_rating</th>
<th id="T_8909a_level0_col6" class="col_heading level0 col6" data-quarto-table-cell-role="th">site</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_8909a_row0_col0" class="data row0 col0">5</td>
<td id="T_8909a_row0_col1" class="data row0 col1">0.638000</td>
<td id="T_8909a_row0_col2" class="data row0 col2">0.461000</td>
<td id="T_8909a_row0_col3" class="data row0 col3">19.000000</td>
<td id="T_8909a_row0_col4" class="data row0 col4">0.350850</td>
<td id="T_8909a_row0_col5" class="data row0 col5">4.800000</td>
<td id="T_8909a_row0_col6" class="data row0 col6">1.000000</td>
</tr>
<tr class="even">
<td id="T_8909a_row1_col0" class="data row1 col0">5</td>
<td id="T_8909a_row1_col1" class="data row1 col1">0.633333</td>
<td id="T_8909a_row1_col2" class="data row1 col2">0.211111</td>
<td id="T_8909a_row1_col3" class="data row1 col3">60.000000</td>
<td id="T_8909a_row1_col4" class="data row1 col4">0.617105</td>
<td id="T_8909a_row1_col5" class="data row1 col5">4.700000</td>
<td id="T_8909a_row1_col6" class="data row1 col6">0.666667</td>
</tr>
<tr class="odd">
<td id="T_8909a_row2_col0" class="data row2 col0">5</td>
<td id="T_8909a_row2_col1" class="data row2 col1">0.916667</td>
<td id="T_8909a_row2_col2" class="data row2 col2">0.787778</td>
<td id="T_8909a_row2_col3" class="data row2 col3">13.000000</td>
<td id="T_8909a_row2_col4" class="data row2 col4">0.480135</td>
<td id="T_8909a_row2_col5" class="data row2 col5">4.100000</td>
<td id="T_8909a_row2_col6" class="data row2 col6">1.000000</td>
</tr>
<tr class="even">
<td id="T_8909a_row3_col0" class="data row3 col0">5</td>
<td id="T_8909a_row3_col1" class="data row3 col1">0.608333</td>
<td id="T_8909a_row3_col2" class="data row3 col2">0.266667</td>
<td id="T_8909a_row3_col3" class="data row3 col3">15.000000</td>
<td id="T_8909a_row3_col4" class="data row3 col4">0.658157</td>
<td id="T_8909a_row3_col5" class="data row3 col5">4.300000</td>
<td id="T_8909a_row3_col6" class="data row3 col6">0.666667</td>
</tr>
<tr class="odd">
<td id="T_8909a_row4_col0" class="data row4 col0">5</td>
<td id="T_8909a_row4_col1" class="data row4 col1">0.400000</td>
<td id="T_8909a_row4_col2" class="data row4 col2">0.180000</td>
<td id="T_8909a_row4_col3" class="data row4 col3">28.000000</td>
<td id="T_8909a_row4_col4" class="data row4 col4">0.658157</td>
<td id="T_8909a_row4_col5" class="data row4 col5">4.300000</td>
<td id="T_8909a_row4_col6" class="data row4 col6">0.666667</td>
</tr>
<tr class="even">
<td id="T_8909a_row5_col0" class="data row5 col0">4</td>
<td id="T_8909a_row5_col1" class="data row5 col1">0.650000</td>
<td id="T_8909a_row5_col2" class="data row5 col2">0.433333</td>
<td id="T_8909a_row5_col3" class="data row5 col3">21.000000</td>
<td id="T_8909a_row5_col4" class="data row5 col4">0.617105</td>
<td id="T_8909a_row5_col5" class="data row5 col5">4.700000</td>
<td id="T_8909a_row5_col6" class="data row5 col6">0.666667</td>
</tr>
<tr class="odd">
<td id="T_8909a_row6_col0" class="data row6 col0">5</td>
<td id="T_8909a_row6_col1" class="data row6 col1">0.683333</td>
<td id="T_8909a_row6_col2" class="data row6 col2">0.300000</td>
<td id="T_8909a_row6_col3" class="data row6 col3">29.000000</td>
<td id="T_8909a_row6_col4" class="data row6 col4">0.350850</td>
<td id="T_8909a_row6_col5" class="data row6 col5">4.800000</td>
<td id="T_8909a_row6_col6" class="data row6 col6">1.000000</td>
</tr>
<tr class="even">
<td id="T_8909a_row7_col0" class="data row7 col0">5</td>
<td id="T_8909a_row7_col1" class="data row7 col1">0.300000</td>
<td id="T_8909a_row7_col2" class="data row7 col2">0.750000</td>
<td id="T_8909a_row7_col3" class="data row7 col3">13.000000</td>
<td id="T_8909a_row7_col4" class="data row7 col4">0.460182</td>
<td id="T_8909a_row7_col5" class="data row7 col5">4.500000</td>
<td id="T_8909a_row7_col6" class="data row7 col6">1.000000</td>
</tr>
<tr class="odd">
<td id="T_8909a_row8_col0" class="data row8 col0">5</td>
<td id="T_8909a_row8_col1" class="data row8 col1">0.635417</td>
<td id="T_8909a_row8_col2" class="data row8 col2">0.516250</td>
<td id="T_8909a_row8_col3" class="data row8 col3">20.000000</td>
<td id="T_8909a_row8_col4" class="data row8 col4">0.350850</td>
<td id="T_8909a_row8_col5" class="data row8 col5">4.800000</td>
<td id="T_8909a_row8_col6" class="data row8 col6">1.000000</td>
</tr>
<tr class="even">
<td id="T_8909a_row9_col0" class="data row9 col0">5</td>
<td id="T_8909a_row9_col1" class="data row9 col1">0.745887</td>
<td id="T_8909a_row9_col2" class="data row9 col2">0.470522</td>
<td id="T_8909a_row9_col3" class="data row9 col3">28.000000</td>
<td id="T_8909a_row9_col4" class="data row9 col4">0.435398</td>
<td id="T_8909a_row9_col5" class="data row9 col5">4.700000</td>
<td id="T_8909a_row9_col6" class="data row9 col6">0.666667</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>And here is a sample of our data after the applied transformations:</p>
<ul>
<li>Snippet of first 10 observations in our training dataset, post-transformation:</li>
</ul>
<div class="cell" data-execution_count="8">
<div id="tbl-post-xform-data" class="cell quarto-float anchored" data-execution_count="8">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-post-xform-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.3: Data (post-transformation)
</figcaption>
<div aria-describedby="tbl-post-xform-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="8">
<style type="text/css">
</style>

<table id="T_88876" class="do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_88876_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">review_star_rating</th>
<th id="T_88876_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">review_subjectivity</th>
<th id="T_88876_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">review_polarity</th>
<th id="T_88876_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">review_length</th>
<th id="T_88876_level0_col4" class="col_heading level0 col4" data-quarto-table-cell-role="th">prod_subjectivity</th>
<th id="T_88876_level0_col5" class="col_heading level0 col5" data-quarto-table-cell-role="th">total_star_rating</th>
<th id="T_88876_level0_col6" class="col_heading level0 col6" data-quarto-table-cell-role="th">site</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_88876_row0_col0" class="data row0 col0">0.527771</td>
<td id="T_88876_row0_col1" class="data row0 col1">0.264387</td>
<td id="T_88876_row0_col2" class="data row0 col2">0.336418</td>
<td id="T_88876_row0_col3" class="data row0 col3">-0.347482</td>
<td id="T_88876_row0_col4" class="data row0 col4">-1.353087</td>
<td id="T_88876_row0_col5" class="data row0 col5">1.088999</td>
<td id="T_88876_row0_col6" class="data row0 col6">0.722595</td>
</tr>
<tr class="even">
<td id="T_88876_row1_col0" class="data row1 col0">0.527771</td>
<td id="T_88876_row1_col1" class="data row1 col1">0.240213</td>
<td id="T_88876_row1_col2" class="data row1 col2">-0.563168</td>
<td id="T_88876_row1_col3" class="data row1 col3">0.998209</td>
<td id="T_88876_row1_col4" class="data row1 col4">1.428196</td>
<td id="T_88876_row1_col5" class="data row1 col5">0.716223</td>
<td id="T_88876_row1_col6" class="data row1 col6">-0.867221</td>
</tr>
<tr class="odd">
<td id="T_88876_row2_col0" class="data row2 col0">0.527771</td>
<td id="T_88876_row2_col1" class="data row2 col1">1.707921</td>
<td id="T_88876_row2_col2" class="data row2 col2">1.512800</td>
<td id="T_88876_row2_col3" class="data row2 col3">-0.544412</td>
<td id="T_88876_row2_col4" class="data row2 col4">-0.002591</td>
<td id="T_88876_row2_col5" class="data row2 col5">-1.520431</td>
<td id="T_88876_row2_col6" class="data row2 col6">0.722595</td>
</tr>
<tr class="even">
<td id="T_88876_row3_col0" class="data row3 col0">0.527771</td>
<td id="T_88876_row3_col1" class="data row3 col1">0.110709</td>
<td id="T_88876_row3_col2" class="data row3 col2">-0.363171</td>
<td id="T_88876_row3_col3" class="data row3 col3">-0.478769</td>
<td id="T_88876_row3_col4" class="data row3 col4">1.857024</td>
<td id="T_88876_row3_col5" class="data row3 col5">-0.774879</td>
<td id="T_88876_row3_col6" class="data row3 col6">-0.867221</td>
</tr>
<tr class="odd">
<td id="T_88876_row4_col0" class="data row4 col0">0.527771</td>
<td id="T_88876_row4_col1" class="data row4 col1">-0.968488</td>
<td id="T_88876_row4_col2" class="data row4 col2">-0.675166</td>
<td id="T_88876_row4_col3" class="data row4 col3">-0.052086</td>
<td id="T_88876_row4_col4" class="data row4 col4">1.857024</td>
<td id="T_88876_row4_col5" class="data row4 col5">-0.774879</td>
<td id="T_88876_row4_col6" class="data row4 col6">-0.867221</td>
</tr>
<tr class="even">
<td id="T_88876_row5_col0" class="data row5 col0">-0.481349</td>
<td id="T_88876_row5_col1" class="data row5 col1">0.326548</td>
<td id="T_88876_row5_col2" class="data row5 col2">0.236820</td>
<td id="T_88876_row5_col3" class="data row5 col3">-0.281839</td>
<td id="T_88876_row5_col4" class="data row5 col4">1.428196</td>
<td id="T_88876_row5_col5" class="data row5 col5">0.716223</td>
<td id="T_88876_row5_col6" class="data row5 col6">-0.867221</td>
</tr>
<tr class="odd">
<td id="T_88876_row6_col0" class="data row6 col0">0.527771</td>
<td id="T_88876_row6_col1" class="data row6 col1">0.499220</td>
<td id="T_88876_row6_col2" class="data row6 col2">-0.243173</td>
<td id="T_88876_row6_col3" class="data row6 col3">-0.019265</td>
<td id="T_88876_row6_col4" class="data row6 col4">-1.353087</td>
<td id="T_88876_row6_col5" class="data row6 col5">1.088999</td>
<td id="T_88876_row6_col6" class="data row6 col6">0.722595</td>
</tr>
<tr class="even">
<td id="T_88876_row7_col0" class="data row7 col0">0.527771</td>
<td id="T_88876_row7_col1" class="data row7 col1">-1.486502</td>
<td id="T_88876_row7_col2" class="data row7 col2">1.376802</td>
<td id="T_88876_row7_col3" class="data row7 col3">-0.544412</td>
<td id="T_88876_row7_col4" class="data row7 col4">-0.211017</td>
<td id="T_88876_row7_col5" class="data row7 col5">-0.029328</td>
<td id="T_88876_row7_col6" class="data row7 col6">0.722595</td>
</tr>
<tr class="odd">
<td id="T_88876_row8_col0" class="data row8 col0">0.527771</td>
<td id="T_88876_row8_col1" class="data row8 col1">0.251005</td>
<td id="T_88876_row8_col2" class="data row8 col2">0.535315</td>
<td id="T_88876_row8_col3" class="data row8 col3">-0.314660</td>
<td id="T_88876_row8_col4" class="data row8 col4">-1.353087</td>
<td id="T_88876_row8_col5" class="data row8 col5">1.088999</td>
<td id="T_88876_row8_col6" class="data row8 col6">0.722595</td>
</tr>
<tr class="even">
<td id="T_88876_row9_col0" class="data row9 col0">0.527771</td>
<td id="T_88876_row9_col1" class="data row9 col1">0.823259</td>
<td id="T_88876_row9_col2" class="data row9 col2">0.370697</td>
<td id="T_88876_row9_col3" class="data row9 col3">-0.052086</td>
<td id="T_88876_row9_col4" class="data row9 col4">-0.469912</td>
<td id="T_88876_row9_col5" class="data row9 col5">0.716223</td>
<td id="T_88876_row9_col6" class="data row9 col6">-0.867221</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Classes in the response variable (the number of helpful votes a review received) set were mapped as follows for all non-linear models:</p>
<ul>
<li><p>0: if the review had no helful votes</p></li>
<li><p>1: if the review had one or more than 1 helpful votes</p></li>
</ul>
<p>Our reasoning for this transformation is that, across the totality of our data, a comment receiving more than one vote as being useful is quite rare in our dataset, as uncovered during our exploratory data analysis. As such, even a single vote for being useful should put the comment in the running for being considered useful.</p>
<section id="dimensionality-reduction" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="dimensionality-reduction"><span class="header-section-number">3.2.1</span> Dimensionality Reduction</h3>
<p>For all models outside of the multiple linear regression, we performed a principal component analysis on the scaled data.</p>
<div class="cell" data-execution_count="9">
<div id="tbl-pca-info" class="cell quarto-float anchored" data-execution_count="9">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-pca-info-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.4: Cumulative Variance of Principal Components (selected features)
</figcaption>
<div aria-describedby="tbl-pca-info-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display">
<style type="text/css">
</style>

<table id="T_64fc3" class="do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_64fc3_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Principal Component</th>
<th id="T_64fc3_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Cumulative Variance</th>
<th id="T_64fc3_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">Explained Variance</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_64fc3_row0_col0" class="data row0 col0">PC1</td>
<td id="T_64fc3_row0_col1" class="data row0 col1">0.350576</td>
<td id="T_64fc3_row0_col2" class="data row0 col2">0.350576</td>
</tr>
<tr class="even">
<td id="T_64fc3_row1_col0" class="data row1 col0">PC2</td>
<td id="T_64fc3_row1_col1" class="data row1 col1">0.548099</td>
<td id="T_64fc3_row1_col2" class="data row1 col2">0.197523</td>
</tr>
<tr class="odd">
<td id="T_64fc3_row2_col0" class="data row2 col0">PC3</td>
<td id="T_64fc3_row2_col1" class="data row2 col1">0.673668</td>
<td id="T_64fc3_row2_col2" class="data row2 col2">0.125569</td>
</tr>
<tr class="even">
<td id="T_64fc3_row3_col0" class="data row3 col0">PC4</td>
<td id="T_64fc3_row3_col1" class="data row3 col1">0.788246</td>
<td id="T_64fc3_row3_col2" class="data row3 col2">0.114578</td>
</tr>
<tr class="odd">
<td id="T_64fc3_row4_col0" class="data row4 col0">PC5</td>
<td id="T_64fc3_row4_col1" class="data row4 col1">0.878823</td>
<td id="T_64fc3_row4_col2" class="data row4 col2">0.090576</td>
</tr>
<tr class="even">
<td id="T_64fc3_row5_col0" class="data row5 col0">PC6</td>
<td id="T_64fc3_row5_col1" class="data row5 col1">0.945954</td>
<td id="T_64fc3_row5_col2" class="data row5 col2">0.067131</td>
</tr>
<tr class="odd">
<td id="T_64fc3_row6_col0" class="data row6 col0">PC7</td>
<td id="T_64fc3_row6_col1" class="data row6 col1">1.000000</td>
<td id="T_64fc3_row6_col2" class="data row6 col2">0.054046</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>To reduce dimensionality for Logistic Regression, Support Vector Machine, and K-Nearest Neighbor models, we elected to reduce from 7 principal commponents to 6. From the above table, we see that these 6 components explain approximately 95% of the variation within the training data. We projected our training and testing data from their 7-dimensional feature space to a reduced 6-dimensional principal component vector space and simplify computations. The only exception here is for our multiple linear regression, which used all 7 dimensions in its perscribed vector space.</p>
</section>
<section id="training-data" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="training-data"><span class="header-section-number">3.2.2</span> Training Data</h3>
<p>To train our dataset, we leveraged the data, post-transformation to train each of our models, including the adjustments of outlier datapoints to being within 3 standard deviations of the mean of each variable. We selected an 80% sample of this data and leveraged the same dataset to train each model.</p>
<p>In the interest of generalization, we sought to take our training dataset solely from products that were common across all three e-commerce platforms. By working with common data from each site, the data and the models may be able to formulate a more generalized construct of how certain variables behave within the different contexts of each platforms, and assist in better prediction and classification of comments as being useful or not.</p>
</section>
<section id="testing-data" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="testing-data"><span class="header-section-number">3.2.3</span> Testing Data</h3>
<p>For testing, we evaluated each model against transformed data, omitting the transformation of any outliers to being within 3 standard deviations of the mean. We performed this action to enable a fair comparison of each model against one another when working with real-world data.</p>
</section>
<section id="desired-outcomes-and-objectives" class="level3" data-number="3.2.4">
<h3 data-number="3.2.4" class="anchored" data-anchor-id="desired-outcomes-and-objectives"><span class="header-section-number">3.2.4</span> Desired Outcomes and Objectives</h3>
<p>Predictive modeling for the usefulness of a user comment on a product, in and of itself, cannot be conducted 100% objectively. We are interested in the exploration of misclassifications - particularly of false positives.</p>
<p>Our data exploration revealed that having even a single vote for a comment as being useful was exceedingly rare, with a median and mean number of votes hovering at or about 0 regardless of the website on which the comment was posted.</p>
<p>Additionally, from a technological perspective, the ability of a web user interface programmer or designer to simply filter or arrange comments by the number of votes they received is trivial.</p>
<p>With the above considerations in mind, we are interested in a model that provides reasonable accuracy while also having an apprpriate amount of recall and a reasonable F1 score. Having a model that perfectly maps predictions to actual outcomes is not useful to this research. Having a number of classified false positives for exploration and subjective evaluation is what interests us.</p>
<p>When exploring test results, we seek a percent of total positive predictions (true and false positives) matching that of the testing dataset. With this in mind, we won’t have the best accuracy, F1, precision, or recall. Having values for precision and recall hovering around 0.5 should support us in classifying reviews that have no votes as being useful as potentially being useful.</p>
</section>
</section>
<section id="examination-of-the-original-multiple-linear-regression" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="examination-of-the-original-multiple-linear-regression"><span class="header-section-number">3.3</span> Examination of the Original Multiple Linear Regression</h2>
<section id="linear-model-construction" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="linear-model-construction"><span class="header-section-number">3.3.1</span> Linear Model Construction</h3>
<p>We leveraged a similar formulation to that which was used within the research of <span class="citation" data-cites="percUse">Guha Majumder, Dutta Gupta, and Paul (<a href="references.html#ref-percUse" role="doc-biblioref">2022</a>)</span>.</p>
<p>Our version of the linear model is designed as follows: <span class="math inline">\(\hat{y} = \beta_0+\beta_1X_{rsr}+\beta_2X_{rs}+\beta_3X_{rp}+\beta_4X_{rl}+\beta_5X_{ps}\)</span> <span class="math inline">\(+\beta_6X_{tsr}+\beta_7X_{s}\)</span></p>
<p>Where each of the following variables have been standard-scaled to a range between 0 and 1 for the input data:</p>
<ul>
<li><p><span class="math inline">\(X_{rsr}\)</span> corresponds to the individual review’s star rating</p></li>
<li><p><span class="math inline">\(X_{rs}\)</span> corresponds to the review’s subjectivity score</p></li>
<li><p><span class="math inline">\(X_{rp}\)</span> corresponds to the review’s polarity score</p></li>
<li><p><span class="math inline">\(X_{rl}\)</span> corresponds to the review’s length (in words)</p></li>
<li><p><span class="math inline">\(X_{ps}\)</span> corresponds to the product description subjectivity score</p></li>
<li><p><span class="math inline">\(X_{tsr}\)</span> is the overall star rating for the product.</p></li>
<li><p><span class="math inline">\(X_{s}\)</span> is the site on which the comment was found (converted to a dummy variable for each website).</p></li>
</ul>
<p>We leveraged <span class="math inline">\(X_{ps}\)</span> as a proxy for the previous model’s binary attribute for whether or not a good was search-based or experienced based. <span class="citation" data-cites="percUse">Guha Majumder, Dutta Gupta, and Paul (<a href="references.html#ref-percUse" role="doc-biblioref">2022</a>)</span> leveraged a set of binary variables to classify a good as being search, experience, or mixed products. Our intuition was that, given the subjectivity of a product’s description and/or specifications, a higher subjectivity score would correspond to an experience-based good, a lower subjectivity would correspond to a search-based good, and everything in-between would be a mixed product. This construction allows for any product to have a continuous potential range, and for most products to be mixed products (some tending more toward experience or search).</p>
<!-- 
The methods of @percUse leveraged a binary class feature to denote whether a product was a search good, an experience good, or a mixed good.  Our exploration leveraged a continuous scale variable from 0 to 1, being the subjectivity of the product description and specifications.  Our intent was to examine whether their model could be simplified using this single continuous variable.  In theory, a product within an e-commerce platform could be considered a search good if it has more specificity (thus less subjectivity), and an experience good if it has greater subjectivity, and any product could lie anywhere within that spectrum of being a degree of search and a degree of experience. 
-->
</section>
<section id="inspection-of-linear-model-assumptions" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="inspection-of-linear-model-assumptions"><span class="header-section-number">3.3.2</span> Inspection of Linear Model Assumptions</h3>
<p>Generally, our examination of the multiple linear regression performed by <span class="citation" data-cites="percUse">Guha Majumder, Dutta Gupta, and Paul (<a href="references.html#ref-percUse" role="doc-biblioref">2022</a>)</span> failed to meet the assumptions of linear regression (normality of residuals, linear pattern in fitted vs.&nbsp;observed values, and constant variance of residuals).</p>
<section id="linearity-of-the-model" class="level4" data-number="3.3.2.1">
<h4 data-number="3.3.2.1" class="anchored" data-anchor-id="linearity-of-the-model"><span class="header-section-number">3.3.2.1</span> Linearity of the Model</h4>
<p>Our model failed to achieve any clear form of linearity between fitted and observed values.</p>
<div id="cell-fig-mlr-results" class="cell" data-execution_count="10">
<div class="cell-output cell-output-display">
<div id="fig-mlr-results" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlr-results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="models implemented_files/figure-html/fig-mlr-results-output-1.png" width="593" height="449" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlr-results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.1: Linear Relationship Between Predictors and Response
</figcaption>
</figure>
</div>
</div>
</div>
<p>The fitted vs.&nbsp;observed values for this plot are not indicative of a linear pattern between the feature and response variables. It provides a high mean square prediction error of 28.4055, an <span class="math inline">\(R^2\)</span> of 0.0884 and adjusted <span class="math inline">\(R^2\)</span> value of 0.0883. The lack of even a moderate correlation here suggests one of the following:</p>
<ul>
<li><p>The wider spread of data from multiple websites and wider range of products reduced the correlation found by <span class="citation" data-cites="percUse">Guha Majumder, Dutta Gupta, and Paul (<a href="references.html#ref-percUse" role="doc-biblioref">2022</a>)</span></p></li>
<li><p>The linear model is not generalizable.</p></li>
<li><p>The model is no better than randomly guessing the number of votes a comment could or should have associated with it.</p></li>
</ul>
<p>What about if we filter down the testing data solely to reflect the positive cases - where the review comment has at least 1 vote for being useful?</p>
<div id="cell-fig-mlr-useful-only" class="cell" data-execution_count="11">
<div class="cell-output cell-output-display">
<div id="fig-mlr-useful-only" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlr-useful-only-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="models implemented_files/figure-html/fig-mlr-useful-only-output-1.png" width="593" height="449" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlr-useful-only-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.2: Relationship Between Predictors and Response (Reviews with at least 1 useful vote)
</figcaption>
</figure>
</div>
</div>
</div>
<p>The linearity issue remains even in this case.</p>
<!--Our testing produced the following coefficients:

$\beta_0$: 0.431, $\beta_1$: -0.086,$\beta_2$: -0.012,$\beta_3$: 0.21,$\beta_4$: 1.528,$\beta_5$: -0.136,$\beta_6$: -0.262

On new training data, the model appears to underpredict the output value, across the board, for the new data.  That being said, there is still a strong linear trend between the predictors and the response.  The intent of this model is not to predict the actual number of votes that a review might have, but whether or not that review would be considered useful to customers.  

Generally examining this result, we would conclude that there is a linear trend between these features, their coefficients, and their corresponding response.-->
</section>
<section id="homoscedasticity-on-normalized-data" class="level4" data-number="3.3.2.2">
<h4 data-number="3.3.2.2" class="anchored" data-anchor-id="homoscedasticity-on-normalized-data"><span class="header-section-number">3.3.2.2</span> Homoscedasticity on Normalized Data</h4>
<p>This model has substantial challenges with heteroscedasticity. Let’s examine a plot of fitted vs.&nbsp;residuals in the model:</p>
<div id="cell-fig-non-constant-var-1" class="cell" data-execution_count="12">
<div class="cell-output cell-output-display">
<div id="fig-non-constant-var-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-non-constant-var-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="models implemented_files/figure-html/fig-non-constant-var-1-output-1.png" width="604" height="449" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-non-constant-var-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.3: Heteroscedasticity in Model
</figcaption>
</figure>
</div>
</div>
</div>
<p>As expected for a model that does not have a clear linear pattern, the residuals for this linear model are heteroscedastic. We should expect to see a constant variance in a plot of predicted vs.&nbsp;residual values, with no correlation between the errors and the predictions. Here, we witness this issue directly, lending to the idea that the model is a poor fit for the data, and the nature of the model (e.g.&nbsp;additional data, additional features, or other feature/response transformations) would need to change substantially to produce effective predictive results.</p>
</section>
<section id="normality-in-residuals" class="level4" data-number="3.3.2.3">
<h4 data-number="3.3.2.3" class="anchored" data-anchor-id="normality-in-residuals"><span class="header-section-number">3.3.2.3</span> Normality in Residuals</h4>
<div id="cell-fig-qq-resid" class="cell" data-execution_count="13">
<div class="cell-output cell-output-display">
<div id="fig-qq-resid" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-qq-resid-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="models implemented_files/figure-html/fig-qq-resid-output-1.png" width="585" height="477" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-qq-resid-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.4: Model Residuals are Abnormal
</figcaption>
</figure>
</div>
</div>
</div>
<p>From the above plot, it is clear that this model fails to adhere to the multiple linear regression requirement for residual normality.</p>
</section>
<section id="conclusion-on-mlr-model" class="level4" data-number="3.3.2.4">
<h4 data-number="3.3.2.4" class="anchored" data-anchor-id="conclusion-on-mlr-model"><span class="header-section-number">3.3.2.4</span> Conclusion on MLR model</h4>
<p>Expanding the Multiple Linear Regression beyond the scope of the study performed by <span class="citation" data-cites="percUse">Guha Majumder, Dutta Gupta, and Paul (<a href="references.html#ref-percUse" role="doc-biblioref">2022</a>)</span> seems to fail all of the assumptions of a linear model.<!--, and does not appear to produce a tracable predictive pattern that may support classification of a review comment as being useful or not to prospective customers.--></p>
<p>Irrespective of this finding, we will output the results of this model sorted in descending order of the score provided by the model, to compare and contrast with the findings of other models. A simple examination of the MLR with respect to its linearity may not be an effective means to evaluate this model’s performance.</p>
<p>Examining instead how the model predicts usefulness in comparison to other methods, alongside a subjective evaluation of the comments themselves may offer greater insight to its performance.</p>
</section>
</section>
</section>
<section id="logistic-regression-classification" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="logistic-regression-classification"><span class="header-section-number">3.4</span> Logistic Regression Classification</h2>
<p>Given the aforementioned challenges with the linear model, our next choice for examination was logistic regression. The MLR called for use of only numeric or continuous variables. Logisitic regression enables us to examine the inclusion of additional categorical variables as part of the regression consideration.</p>
<section id="hyperparameter-tuning" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="hyperparameter-tuning"><span class="header-section-number">3.4.1</span> Hyperparameter Tuning</h3>
<p>Logistic regression is, by our assessment, among the best performing models in our research effort. We inspected 3 logistic regression models - one tuned using the class weight hyperparameter to address the class imbalance present in the dataset. By assigning a higher weight to the minority class (1, or at least 1 vote for being useful) and a lower weight to the majority class (0, or no votes for the comment as being useful), the model was able to better capture the patterns associated with the minority class, leading to metrics in our target range.</p>
</section>
<section id="oversampling-techniques" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="oversampling-techniques"><span class="header-section-number">3.4.2</span> Oversampling techniques</h3>
<p>Additionally, 2 more logistic regression models are trained using two oversampling techniques, namely ADASYN and SMOTE. ADASYN, which generates synthetic samples for the minority class based on their difficulty in learning regions, and SMOTE, which creates synthetic samples by interpolating between existing minority class samples, were used to address the class imbalance problem. These techniques help to provide the model with more balanced training data, allowing it to learn the characteristics of both classes more effectively.</p>
<p>It is a well know fact that oversampling techniques can be employed in the event of a severe class imbalance if hyperparameter tuning does not improve the model performance. However, despite the heavy class imbalance, the tuned model and the SMOTE model achieve great result with approximately 80% accuracy indicating that it is proficient at making correct predictions. However, the models do differ in their scoring for precision and recall.</p>
<p>The tuned model delivers a higher precision and a lower recall, bouth around our target range of 0.4 to 0.55 for both, leaning us in the direction of examining the tuned model’s outputs for predicted useful comments. The “incorrect” prediction of elements from the minority class, which is what we’re looking for. We don’t want an over-prediction for false positives, but a reasonable degree of comments that could potentially be useful from a customer standpoint.</p>
</section>
<section id="logistic-regression-test-results" class="level3" data-number="3.4.3">
<h3 data-number="3.4.3" class="anchored" data-anchor-id="logistic-regression-test-results"><span class="header-section-number">3.4.3</span> Logistic Regression Test Results</h3>
<div class="cell" data-execution_count="15">
<div id="tbl-log-reg-results" class="cell quarto-float anchored" data-execution_count="15">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-log-reg-results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.5: Test Scores for Logistic Regression
</figcaption>
<div aria-describedby="tbl-log-reg-results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display">
<style type="text/css">
</style>

<table id="T_31ac3" class="do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_31ac3_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Model</th>
<th id="T_31ac3_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Accuracy</th>
<th id="T_31ac3_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">F1</th>
<th id="T_31ac3_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">Precision</th>
<th id="T_31ac3_level0_col4" class="col_heading level0 col4" data-quarto-table-cell-role="th">Recall</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_31ac3_row0_col0" class="data row0 col0">Logistic Regression (TUNED)</td>
<td id="T_31ac3_row0_col1" class="data row0 col1">0.827358</td>
<td id="T_31ac3_row0_col2" class="data row0 col2">0.474599</td>
<td id="T_31ac3_row0_col3" class="data row0 col3">0.433375</td>
<td id="T_31ac3_row0_col4" class="data row0 col4">0.524491</td>
</tr>
<tr class="even">
<td id="T_31ac3_row1_col0" class="data row1 col0">Logistic Regression (ADASYN)</td>
<td id="T_31ac3_row1_col1" class="data row1 col1">0.783554</td>
<td id="T_31ac3_row1_col2" class="data row1 col2">0.474715</td>
<td id="T_31ac3_row1_col3" class="data row1 col3">0.371331</td>
<td id="T_31ac3_row1_col4" class="data row1 col4">0.657875</td>
</tr>
<tr class="odd">
<td id="T_31ac3_row2_col0" class="data row2 col0">Logistic Regression (SMOTE)</td>
<td id="T_31ac3_row2_col1" class="data row2 col1">0.799686</td>
<td id="T_31ac3_row2_col2" class="data row2 col2">0.484429</td>
<td id="T_31ac3_row2_col3" class="data row2 col3">0.392340</td>
<td id="T_31ac3_row2_col4" class="data row2 col4">0.633007</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div id="cell-fig-cm-logreg" class="cell" data-execution_count="16">
<div class="cell-output cell-output-display">
<div id="fig-cm-logreg" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cm-logreg-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="models implemented_files/figure-html/fig-cm-logreg-output-1.png" class="quarto-figure quarto-figure-center figure-img" width="301" height="566">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cm-logreg-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.5: Logistic Regression Confusion Matrices
</figcaption>
</figure>
</div>
</div>
</div>
<!--Let's examine some of its outputs.  We'll predict the probability that the comment belongs to the "useful" class and sort in descending order, then filter out any comments that are flagged as not useful.  This may introduce to us new comments that are useful to prospective buyers.-->
<!-- These comments, holding high probability from the Logistic Regression-Tuned model, seem to have the following qualities:

* Longer comments with descriptive detail

* ...

Subjectively, if our research team were prospective buyers of these products, we find that these comments would be beneficial to us in pursuing a decision as to whether or not to purchase the product. -->
<p>Comments, sorted by probabability of being useful in descending order, are located here (link).</p>
</section>
</section>
<section id="k-nearest-neighbors-classification" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="k-nearest-neighbors-classification"><span class="header-section-number">3.5</span> K-Nearest Neighbors Classification</h2>
<p>K-Nearest Neighbors is used to learn and identify the target class instances. It makes predictions by calculating distance (usually, Euclidean distance) between a given instance and all other instances in the dataset in feature space.</p>
<section id="hyperparameter-tuning-1" class="level3" data-number="3.5.1">
<h3 data-number="3.5.1" class="anchored" data-anchor-id="hyperparameter-tuning-1"><span class="header-section-number">3.5.1</span> Hyperparameter Tuning</h3>
<p>The value of k is the most critial hyperparameter in the KNN Calssification algorithm. It determines the performance of the model. Usually a small k value leads to overly complex understanding of the data that might result into overfitting, however, a higher k values can lead to underfitting.</p>
<p>We have looked at multiple values of k for our given data and compared a set of model metrics - accuracy, F1 score, precision, and recall to find the most optimal model to be the model with <code>k = 3</code>.</p>
<p>As we did for our logisitc regression models, we leveraged the SMOTE oversampling technique to support each KNN model in better predicting true positive cases. Having additional co-located true-positive neighbors will impact the distance metric of test data points and the number of closest neighbors in a particular class.</p>
<!--1. Just by looking at the accuracy for any given value of k, it ranges between 98-99% indicating that KNN might be a good model for the given data.

2. Among the evaluated models, KNN with `k = 3` achieves the highest F1 score of approximately 78.2%, indicating a balanced trade-off between precision and recall.

3. While all models have high precision and recall rates, KNN with higher k values (5, 7, and 9) demonstrate slightly lower F1 scores.-->
</section>
<section id="knn-test-results" class="level3" data-number="3.5.2">
<h3 data-number="3.5.2" class="anchored" data-anchor-id="knn-test-results"><span class="header-section-number">3.5.2</span> KNN Test Results</h3>
<p>Looking the results shown below we can say that:</p>
<ol type="1">
<li><p>KNN at each neighbor level performs poorer in comparison to logistic regression. The accuracy and precision do not reach sufficient levels. Furthermore, the total percent prediction of positive cases (ranging from 21.5-25.6%) far exceed the percent of true positive cases in the testing dataset (approximately 17%). These over-optimistic prediction levels (in combination with a high number of false negatives) suggest we may not be meeting the mark with this model, as once again, votes for a comment as being useful is relatively rare in this dataset.</p></li>
<li><p>For KNN with n=3 neighbors, we are the closest to the actual percent of positives in the source dataset. This model, however, has poor performance for precision, recall, and F1.</p></li>
<li><p>For KNN with n=9 neighbors, we improve the F1 score, but the precision and recall remain substantially low.</p></li>
<li><p>KNN, for any number of neighbors and given our selected features, may be an insufficient model for our use case. All of the KNN models far exceed our target % of total positive predictions. The source testing data has around 17% of the reviews as being “useful”, whereas each of these models’ positive predictions exceed that rate by at least 4%.</p></li>
</ol>
<!--try to tweak and tune this model for better performance-->
<div class="cell" data-execution_count="18">
<div id="tbl-knn-test-results" class="cell quarto-float anchored" data-execution_count="18">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-knn-test-results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.6: Test Scores for K-Nearest Neighbors
</figcaption>
<div aria-describedby="tbl-knn-test-results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display">
<style type="text/css">
</style>

<table id="T_5e1da" class="do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_5e1da_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Model</th>
<th id="T_5e1da_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Accuracy</th>
<th id="T_5e1da_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">F1</th>
<th id="T_5e1da_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">Precision</th>
<th id="T_5e1da_level0_col4" class="col_heading level0 col4" data-quarto-table-cell-role="th">Recall</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_5e1da_row0_col0" class="data row0 col0">KNN (k=3)</td>
<td id="T_5e1da_row0_col1" class="data row0 col1">0.775823</td>
<td id="T_5e1da_row0_col2" class="data row0 col2">0.377218</td>
<td id="T_5e1da_row0_col3" class="data row0 col3">0.321315</td>
<td id="T_5e1da_row0_col4" class="data row0 col4">0.456669</td>
</tr>
<tr class="even">
<td id="T_5e1da_row1_col0" class="data row1 col0">KNN (k=5)</td>
<td id="T_5e1da_row1_col1" class="data row1 col1">0.772687</td>
<td id="T_5e1da_row1_col2" class="data row1 col2">0.401298</td>
<td id="T_5e1da_row1_col3" class="data row1 col3">0.329777</td>
<td id="T_5e1da_row1_col4" class="data row1 col4">0.512434</td>
</tr>
<tr class="odd">
<td id="T_5e1da_row2_col0" class="data row2 col0">KNN (k=7)</td>
<td id="T_5e1da_row2_col1" class="data row2 col1">0.769102</td>
<td id="T_5e1da_row2_col2" class="data row2 col2">0.412988</td>
<td id="T_5e1da_row2_col3" class="data row2 col3">0.331960</td>
<td id="T_5e1da_row2_col4" class="data row2 col4">0.546345</td>
</tr>
<tr class="even">
<td id="T_5e1da_row3_col0" class="data row3 col0">KNN (k=9)</td>
<td id="T_5e1da_row3_col1" class="data row3 col1">0.765404</td>
<td id="T_5e1da_row3_col2" class="data row3 col2">0.415410</td>
<td id="T_5e1da_row3_col3" class="data row3 col3">0.329933</td>
<td id="T_5e1da_row3_col4" class="data row3 col4">0.560663</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div id="cell-fig-cm-knn" class="cell" data-execution_count="19">
<div class="cell-output cell-output-display">
<div id="fig-cm-knn" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cm-knn-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="models implemented_files/figure-html/fig-cm-knn-output-1.png" class="quarto-figure quarto-figure-center figure-img" width="319" height="950">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cm-knn-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.6: Confusion Matrices for KNN Models
</figcaption>
</figure>
</div>
</div>
</div>
<p>Simply examining the above confusion matrices, especially the upper-right hand corner false posistives, we see that KNN is likely over-optimistic about the usefulness of customer feedback. For the purpose of comparison to other models, we will examine the results of KNN <code>n=3</code>, as it held the closest value to the overall percent of true positives (17% true positives, 21.4% predicted).</p>
</section>
</section>
<section id="support-vector-machine-classification" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="support-vector-machine-classification"><span class="header-section-number">3.6</span> Support Vector Machine Classification</h2>
<p>Support Vector Machines work on classification problems by finding an optimal hyperplane that best classifies the target classes in the given feature space. Because of its flexibility of moving the hyperplane and adapting to the intricacies of the data, SVM could be a useful and powerful algorithm for our use case.</p>
<section id="hyperparameter-tuning-2" class="level3" data-number="3.6.1">
<h3 data-number="3.6.1" class="anchored" data-anchor-id="hyperparameter-tuning-2"><span class="header-section-number">3.6.1</span> Hyperparameter Tuning</h3>
<p>The complexity of a SVM model is determined by the choice of kernel function that supports the capturing of nuances within the data. Below are our implmentation results of the performance metrics of Support Vector Machine (SVM) models trained with different kernel functions: polynomial (SVM-Poly), radial basis function (SVM-RBF), and sigmoid (SVM-Sigmoid).</p>
<p>One note on our SVM-Poly implementation - it is equivalent to a standard SVM linear kernel, as we have implemented it with <code>degree=1</code>. We found during our evaluation, for reasons unknown to us, that polynomial implementation with degree 1 ran faster than that of the standard linear kernel. This was simply crafted this way to reduce execution time.</p>
<p>To tune each version of this model, we leveraged a reduced set of principal components, and adjusted class weighting, as having useful votes for a product is a relative rarity across each of the e-commerce platforms. To boost our recall, we elected to assign weights of 0.2 to class 0 (not useful) and 0.8 to class 1 (useful).</p>
<p>Furthermore, for the tuned model, we adjusted the probability threshold to 0.1 vs.&nbsp;the default 0.5 and class weighting set to better adjust the model for mis-classification of the minority class (as we did for the logistic regression). The combination of this shift with the class weighting allowed us to achieve a total positive prediction rate in close proximity to the actual true positives.</p>
</section>
<section id="svm-test-results" class="level3" data-number="3.6.2">
<h3 data-number="3.6.2" class="anchored" data-anchor-id="svm-test-results"><span class="header-section-number">3.6.2</span> SVM Test Results</h3>
<div class="cell" data-execution_count="21">
<div id="tbl-svm-test-results" class="cell quarto-float anchored" data-execution_count="21">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-svm-test-results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.7: Test Scores for Support Vector Machine
</figcaption>
<div aria-describedby="tbl-svm-test-results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display">
<style type="text/css">
</style>

<table id="T_daa1c" class="do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_daa1c_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Model</th>
<th id="T_daa1c_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Accuracy</th>
<th id="T_daa1c_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">F1</th>
<th id="T_daa1c_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">Precision</th>
<th id="T_daa1c_level0_col4" class="col_heading level0 col4" data-quarto-table-cell-role="th">Recall</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_daa1c_row0_col0" class="data row0 col0">SVM-Poly</td>
<td id="T_daa1c_row0_col1" class="data row0 col1">0.827134</td>
<td id="T_daa1c_row0_col2" class="data row0 col2">0.465905</td>
<td id="T_daa1c_row0_col3" class="data row0 col3">0.430858</td>
<td id="T_daa1c_row0_col4" class="data row0 col4">0.507159</td>
</tr>
<tr class="even">
<td id="T_daa1c_row1_col0" class="data row1 col0">SVM-RBF</td>
<td id="T_daa1c_row1_col1" class="data row1 col1">0.849989</td>
<td id="T_daa1c_row1_col2" class="data row1 col2">0.418079</td>
<td id="T_daa1c_row1_col3" class="data row1 col3">0.493840</td>
<td id="T_daa1c_row1_col4" class="data row1 col4">0.362472</td>
</tr>
<tr class="odd">
<td id="T_daa1c_row2_col0" class="data row2 col0">SVM-Sigmoid</td>
<td id="T_daa1c_row2_col1" class="data row2 col1">0.768205</td>
<td id="T_daa1c_row2_col2" class="data row2 col2">0.367085</td>
<td id="T_daa1c_row2_col3" class="data row2 col3">0.308960</td>
<td id="T_daa1c_row2_col4" class="data row2 col4">0.452148</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div id="cell-fig-cm-svm" class="cell" data-execution_count="22">
<div class="cell-output cell-output-display">
<div id="fig-cm-svm" class="quarto-figure quarto-figure-center quarto-float anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cm-svm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="models implemented_files/figure-html/fig-cm-svm-output-1.png" class="quarto-figure quarto-figure-center figure-img" width="301" height="566">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cm-svm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.7: Confusion Matrices for Support Vector Machines
</figcaption>
</figure>
</div>
</div>
</div>
<p>Looking the SVM testing results, we can say that:</p>
<ol type="1">
<li><p>SVM with a polynomial kernel (set to degree 1, or linear) predicts a total percent of true positives close to the underlying source data (approximately 17%).</p></li>
<li><p>SVM with radial basis function kernel appears to under-predict positive cases and fails to meet our F1 threshold.</p></li>
<li><p>SVM with sigmoid kernel over-predicts false positives and fails to meet our F1 threshold.</p></li>
</ol>
<p>SVM Poly (linear, degree 1) appears to achieve reasonable accuracy while hitting an appropriate level for F1 and Recall for our use case. The presence of false positives gives us something to subjectively examine for its usefulness as a potential customer.</p>
</section>
</section>
<section id="model-comparison" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="model-comparison"><span class="header-section-number">3.7</span> Model Comparison</h2>
<p>We examine the following table to compare and contrast our implemented models on our collected data.</p>
<div class="cell" data-execution_count="24">
<div id="tbl-final-results" class="cell quarto-float anchored" data-execution_count="24">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-final-results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.8: Summary Metrics (all evaluated models)
</figcaption>
<div aria-describedby="tbl-final-results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="24">
<style type="text/css">
</style>

<table id="T_eb039" class="do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_eb039_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Model</th>
<th id="T_eb039_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Accuracy</th>
<th id="T_eb039_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">F1</th>
<th id="T_eb039_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">Precision</th>
<th id="T_eb039_level0_col4" class="col_heading level0 col4" data-quarto-table-cell-role="th">Recall</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_eb039_row0_col0" class="data row0 col0">Logistic Regression (TUNED)</td>
<td id="T_eb039_row0_col1" class="data row0 col1">0.827358</td>
<td id="T_eb039_row0_col2" class="data row0 col2">0.474599</td>
<td id="T_eb039_row0_col3" class="data row0 col3">0.433375</td>
<td id="T_eb039_row0_col4" class="data row0 col4">0.524491</td>
</tr>
<tr class="even">
<td id="T_eb039_row1_col0" class="data row1 col0">Logistic Regression (ADASYN)</td>
<td id="T_eb039_row1_col1" class="data row1 col1">0.783554</td>
<td id="T_eb039_row1_col2" class="data row1 col2">0.474715</td>
<td id="T_eb039_row1_col3" class="data row1 col3">0.371331</td>
<td id="T_eb039_row1_col4" class="data row1 col4">0.657875</td>
</tr>
<tr class="odd">
<td id="T_eb039_row2_col0" class="data row2 col0">Logistic Regression (SMOTE)</td>
<td id="T_eb039_row2_col1" class="data row2 col1">0.799686</td>
<td id="T_eb039_row2_col2" class="data row2 col2">0.484429</td>
<td id="T_eb039_row2_col3" class="data row2 col3">0.392340</td>
<td id="T_eb039_row2_col4" class="data row2 col4">0.633007</td>
</tr>
<tr class="even">
<td id="T_eb039_row3_col0" class="data row3 col0">KNN (k=3)</td>
<td id="T_eb039_row3_col1" class="data row3 col1">0.775823</td>
<td id="T_eb039_row3_col2" class="data row3 col2">0.377218</td>
<td id="T_eb039_row3_col3" class="data row3 col3">0.321315</td>
<td id="T_eb039_row3_col4" class="data row3 col4">0.456669</td>
</tr>
<tr class="odd">
<td id="T_eb039_row4_col0" class="data row4 col0">KNN (k=5)</td>
<td id="T_eb039_row4_col1" class="data row4 col1">0.772687</td>
<td id="T_eb039_row4_col2" class="data row4 col2">0.401298</td>
<td id="T_eb039_row4_col3" class="data row4 col3">0.329777</td>
<td id="T_eb039_row4_col4" class="data row4 col4">0.512434</td>
</tr>
<tr class="even">
<td id="T_eb039_row5_col0" class="data row5 col0">KNN (k=7)</td>
<td id="T_eb039_row5_col1" class="data row5 col1">0.769102</td>
<td id="T_eb039_row5_col2" class="data row5 col2">0.412988</td>
<td id="T_eb039_row5_col3" class="data row5 col3">0.331960</td>
<td id="T_eb039_row5_col4" class="data row5 col4">0.546345</td>
</tr>
<tr class="odd">
<td id="T_eb039_row6_col0" class="data row6 col0">KNN (k=9)</td>
<td id="T_eb039_row6_col1" class="data row6 col1">0.765404</td>
<td id="T_eb039_row6_col2" class="data row6 col2">0.415410</td>
<td id="T_eb039_row6_col3" class="data row6 col3">0.329933</td>
<td id="T_eb039_row6_col4" class="data row6 col4">0.560663</td>
</tr>
<tr class="even">
<td id="T_eb039_row7_col0" class="data row7 col0">SVM-Poly</td>
<td id="T_eb039_row7_col1" class="data row7 col1">0.827134</td>
<td id="T_eb039_row7_col2" class="data row7 col2">0.465905</td>
<td id="T_eb039_row7_col3" class="data row7 col3">0.430858</td>
<td id="T_eb039_row7_col4" class="data row7 col4">0.507159</td>
</tr>
<tr class="odd">
<td id="T_eb039_row8_col0" class="data row8 col0">SVM-RBF</td>
<td id="T_eb039_row8_col1" class="data row8 col1">0.849989</td>
<td id="T_eb039_row8_col2" class="data row8 col2">0.418079</td>
<td id="T_eb039_row8_col3" class="data row8 col3">0.493840</td>
<td id="T_eb039_row8_col4" class="data row8 col4">0.362472</td>
</tr>
<tr class="even">
<td id="T_eb039_row9_col0" class="data row9 col0">SVM-Sigmoid</td>
<td id="T_eb039_row9_col1" class="data row9 col1">0.768205</td>
<td id="T_eb039_row9_col2" class="data row9 col2">0.367085</td>
<td id="T_eb039_row9_col3" class="data row9 col3">0.308960</td>
<td id="T_eb039_row9_col4" class="data row9 col4">0.452148</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>The most interesting results, we find, come from the tuned Logistic Regression model and SVM-Poly models. These seem to hit a sweet spot when it comes to F1 and recall scores. Exceeding certain thresholds (at or around 0.5), seems to have too high a percentage of false positives.</p>
<p>50% of our oversampled training data held votes as being useful comments, and our regular training data contained samples with approximately 7% being voted as useful.</p>
<p>For our testing data, approximately 17% of the records held votes for being useful.</p>
<p>The Tuned Logistic Regression predicted a total number of positive (true and false positives) of 1606, or 17.99% of the available samples. This result is very close in proximity to the actual total for true positives within the data.</p>
<p>The SVM Poly model also produced a prediction of approximately 17.5% of the testing data being useful (comparable to the actual value of 17%).</p>
<p>None of the other model formulations or permutations achieved a percentage of total positive prediction rate as in close proximity to the actual underlying data.</p>
<p>The false positives for SVM-Poly and Tuned Logistic Regression are located here:</p>
<ul>
<li><p><a href="https://github.com/pconnell/CSCI-Final-Project/blob/main/data/LogisticRegressionPredUseful.csv">Logistic Regression Prediction Results</a></p></li>
<li><p><a href="https://github.com/pconnell/CSCI-Final-Project/blob/main/data/SVMPolyPredUseful.csv">Support Vector Machine Prediction Results</a></p></li>
<li><p><a href="https://github.com/pconnell/CSCI-Final-Project/blob/main/data/KNNPredUseful.csv">K-Nearest Neighbor Prediction Results</a></p></li>
<li><p><a href="https://github.com/pconnell/CSCI-Final-Project/blob/main/data/MLRPredUseful.csv">Multiple Linear Regression Prediction Results</a></p></li>
<li><p>For each of the models, the files are filtered to solely contain false positive reviews (those for which the model predicted the review is useful, but had no votes in favor of it in the source data).</p></li>
</ul>
<p>Amongst the ranking of outputs from MLR, Logistic Regression, and SVM, we see some common threads.</p>
<ul>
<li><p>Each recommended the same top 3 review comments for the following products:</p>
<ul>
<li><p>Mario Kart 8 from Amazon.</p></li>
<li><p>Dyson Ball Vacuum from Target.</p></li>
<li><p>HP Deskjet 2755e Printer from Amazon.</p></li>
</ul></li>
</ul>
<div class="cell" data-execution_count="25">
<div id="tbl-met-comp" class="cell quarto-float anchored" data-execution_count="25">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-met-comp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.9: Comparison of Metrics, top 30 Reviews for 3 models.
</figcaption>
<div aria-describedby="tbl-met-comp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display">
<div>


<table class="dataframe do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">review_subjectivity</th>
<th data-quarto-table-cell-role="th">review_polarity</th>
<th data-quarto-table-cell-role="th">review_length</th>
<th data-quarto-table-cell-role="th">prod_subjectivity</th>
<th data-quarto-table-cell-role="th">total_star_rating</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">mean</td>
<td>0.521513</td>
<td>0.108089</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">std</td>
<td>0.089206</td>
<td>0.135156</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">mean</td>
<td>0.515744</td>
<td>0.175872</td>
<td>328.766667</td>
<td>0.481104</td>
<td>4.543333</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">std</td>
<td>0.084931</td>
<td>0.097946</td>
<td>175.919786</td>
<td>0.071207</td>
<td>0.286095</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">mean</td>
<td>0.515099</td>
<td>0.100752</td>
<td>244.266667</td>
<td>0.513061</td>
<td>3.913333</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">std</td>
<td>0.083521</td>
<td>0.130734</td>
<td>212.249192</td>
<td>0.101062</td>
<td>1.153027</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<ul>
<li><p>Examining some metrics from the top 30 recommended “useful” reviews -</p>
<ul>
<li><p>Logistic Regression and SVM had similar means and standard deviations for review star rating, review subjectivity, and review polarity. Each seemed to prefer slightly positive reviews (as follows from our EDA), and an even split on the subjectivity of the text (not overly precise, not overly vague).</p></li>
<li><p>Each model seemed to hold a preference for longer reviews, and for product descriptions that we assess may be considered “mixed” products (part search, part experience). Each model also held a preference for higher total star ratings for the product.</p></li>
<li><p>The MLR holds a bias toward higher star ratings (4.1) in its predictions. Similarly, it had a greater bias toward positivity in the review similar subjectivity preference as held within Logisitic Regression and SVM.</p></li>
<li><p>Generally the near “neutrality” with regards to polarity, subjectivity, and star rating for logistic regression and SVM could be useful to prospective customers. Allowing users to filter results based off of these predicted classifications could bring balance to other reviews presented when sorted in descending order by number of useful votes. The neutrality aspect can give the customer insight into unknown positive or negative reviews and shed light on useful information as a potential customer.</p></li>
<li><p>The presence of common reviews within the top 30 suggests that each of these models could hold a degree of validity. The interpretation and assessment, however, is subjective. Performing a further study with participants to evaluate the prediction of useful comments would support determining the validity of these models and their effectiveness.</p></li>
</ul></li>
</ul>
<!--
Each of these models had similar performance in terms of accuracy and precision. A key consideration for us is within the realm of recall in that false positives are potentially beneficial to the generalization of this model to identify reviews that are useful, but currently possess no helpful votes.  None of the models delivered any false positives, but having high recall may support identification of new, useful comments.

The top 2 performing models were our Support Vector Machine and Logistic Regression implementations.  Between the two, SVM had higher recall, which is preferable in our use case.  That being said, on every metric between the two models, there was near equivalent performance.

With our preferences toward higher recall, the implementation of the SVM-Sigmoid and SVM-RBF models delivered best on our objectives, identifying the highest volume of true positives, minimizing false negatives, and providing a limited number of true positives that could identify comments with no votes that are useful to customers. 

From a stakeholder standpoint, these two models can both be beneficial, whether looking from the standpoint of the customer or the e-commerce platform.

The RBF model, with more exploration and examination, could be very beneficial to e-commerce platforms.  If the model could be modified and updated to identify comments that are closer in proximity to promotional comments (which potentially come at a cost to these platforms), it may allow them to present comments similar in quality to a paid promotional review without the platform having to pay for it.

The Sigmoid model, with additional training and tuning, could be of greater benefit to customers.  This model is less inclined to capture promomtional feedback comments and provide potentially useful feedback absent other outside influence.  At a subjective level, not all of the content contained in these classified reviews are useful, though many are. <!-- any additional writeup comments here-->


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-percUse" class="csl-entry" role="listitem">
Guha Majumder, Madhumita, Sangita Dutta Gupta, and Justin Paul. 2022. <span>“Perceived Usefulness of Online Customer Reviews: A Review Mining Approach Using Machine Learning &amp; Exploratory Data Analysis.”</span> <em>Journal of Business Research</em> 150 (November): 147–64. <a href="https://doi.org/10.1016/j.jbusres.2022.06.012">https://doi.org/10.1016/j.jbusres.2022.06.012</a>.
</div>
<div id="ref-Hu_Gong_Guo_2010" class="csl-entry" role="listitem">
Hu, Weishu, Zhiguo Gong, and Jingzhi Guo. 2010. <span>“Mining Product Features from Online Reviews.”</span> <em>2010 IEEE 7th International Conference on E-Business Engineering</em>, November. <a href="https://doi.org/10.1109/icebe.2010.51">https://doi.org/10.1109/icebe.2010.51</a>.
</div>
<div id="ref-Rajeev_Rekha_2015" class="csl-entry" role="listitem">
Rajeev, P Venkata, and V Smrithi Rekha. 2015. <span>“Recommending Products to Customers Using Opinion Mining of Online Product Reviews and Features.”</span> <em>2015 International Conference on Circuits, Power and Computing Technologies [ICCPCT-2015]</em>, March. <a href="https://doi.org/10.1109/iccpct.2015.7159433">https://doi.org/10.1109/iccpct.2015.7159433</a>.
</div>
<div id="ref-Wang_Li_Tian_Wang_Cheng_2018" class="csl-entry" role="listitem">
Wang, W. M., Z. Li, Z. G. Tian, J. W. Wang, and M. N. Cheng. 2018. <span>“Extracting and Summarizing Affective Features and Responses from Online Product Descriptions and Reviews: A Kansei Text Mining Approach.”</span> <em>Engineering Applications of Artificial Intelligence</em> 73 (August): 149–62. <a href="https://doi.org/10.1016/j.engappai.2018.05.005">https://doi.org/10.1016/j.engappai.2018.05.005</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="./data.html" class="pagination-link  aria-label=" &lt;span="" collection="" and="" exploration&lt;="" span&gt;"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data Collection and Exploration</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./conclusion.html" class="pagination-link" aria-label="<span class='chapter-number'>4</span>&nbsp; <span class='chapter-title'>Conclusion</span>">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Conclusion</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>