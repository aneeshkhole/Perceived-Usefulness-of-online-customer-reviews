<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>CSCI 5302 - Final Project - 2&nbsp; Data Collection and Exploration</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./models implemented.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data Collection and Exploration</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">CSCI 5302 - Final Project</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/pconnell/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="./CSCI_5302_Final_Report.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data Collection and Exploration</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./models implemented.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Models Implemented</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#data-collection-overview" id="toc-data-collection-overview" class="nav-link active" data-scroll-target="#data-collection-overview"><span class="header-section-number">2.1</span> Data Collection Overview</a></li>
  <li><a href="#data-collection-details" id="toc-data-collection-details" class="nav-link" data-scroll-target="#data-collection-details"><span class="header-section-number">2.2</span> Data Collection Details</a></li>
  <li><a href="#data-collection-procedures" id="toc-data-collection-procedures" class="nav-link" data-scroll-target="#data-collection-procedures"><span class="header-section-number">2.3</span> Data Collection Procedures</a></li>
  <li><a href="#data-exploration" id="toc-data-exploration" class="nav-link" data-scroll-target="#data-exploration"><span class="header-section-number">2.4</span> Data Exploration</a></li>
  <li><a href="#data-exploration-and-visualization" id="toc-data-exploration-and-visualization" class="nav-link" data-scroll-target="#data-exploration-and-visualization"><span class="header-section-number">2.5</span> Data Exploration and Visualization</a>
  <ul class="collapse">
  <li><a href="#univariate-plots-and-distributions" id="toc-univariate-plots-and-distributions" class="nav-link" data-scroll-target="#univariate-plots-and-distributions"><span class="header-section-number">2.5.1</span> Univariate Plots and Distributions</a></li>
  <li><a href="#bimultivariate-plots" id="toc-bimultivariate-plots" class="nav-link" data-scroll-target="#bimultivariate-plots"><span class="header-section-number">2.5.2</span> Bi/Multivariate Plots</a></li>
  <li><a href="#hypothesis-testing-for-key-feature-and-response-variables" id="toc-hypothesis-testing-for-key-feature-and-response-variables" class="nav-link" data-scroll-target="#hypothesis-testing-for-key-feature-and-response-variables"><span class="header-section-number">2.5.3</span> Hypothesis Testing for Key Feature and Response Variables</a></li>
  </ul></li>
  <li><a href="#data-before-after" id="toc-data-before-after" class="nav-link" data-scroll-target="#data-before-after"><span class="header-section-number">2.6</span> Data Before / After</a></li>
  <li><a href="#insights-from-collection-and-eda" id="toc-insights-from-collection-and-eda" class="nav-link" data-scroll-target="#insights-from-collection-and-eda"><span class="header-section-number">2.7</span> Insights from Collection and EDA</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-data" class="quarto-section-identifier"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data Collection and Exploration</span></span></h1>
</div>



<div class="quarto-title-meta column-body">

    
  
    
  </div>
  


</header>


<section id="data-collection-overview" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="data-collection-overview"><span class="header-section-number">2.1</span> Data Collection Overview</h2>
<p>The original efforts by <span class="citation" data-cites="percUse">Guha Majumder, Dutta Gupta, and Paul (<a href="references.html#ref-percUse" role="doc-biblioref">2022</a>)</span> selected three products, all listed on Amazon for sale. In our efforts, we leveraged python Selenium, urllib, and Beautiful Soup to scrape data from 20 different products across multiple websites (Amazon, BestBuy, and Target). Where possible, we sought to collect the exact same 20 products from each site and customer feedback associated with each.</p>
<p>As part of collection, to the greatest extent we were able, we cleaned information <em>during</em> the scraping process. Doing this enabled us to have minimal cleaning efforts after collection. Post collection, remaining items such as handling and removing special characters, unicode characters, addressing customer reviews written in foreign languages, and addressing misspellings remained necessary.</p>
<p>In terms of simplicity for scraping our data, we manually identified a list of products from each of the aforementioned sites. Our team divided responsibilities to produce scraping code customized for each of the three websites.</p>
</section>
<section id="data-collection-details" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="data-collection-details"><span class="header-section-number">2.2</span> Data Collection Details</h2>
<p>In collecting our data, in order to adhere to the model implemented by <span class="citation" data-cites="percUse">Guha Majumder, Dutta Gupta, and Paul (<a href="references.html#ref-percUse" role="doc-biblioref">2022</a>)</span>, we required the following data points:</p>
<div id="405ad025" class="cell" data-tbl="tbl-data-reqs-products" data-execution_count="2">
<div class="cell-output cell-output-display" data-execution_count="2">
<style type="text/css">
</style>

<table id="T_5bda6" data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th id="T_5bda6_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Variable</th>
<th id="T_5bda6_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Data Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_5bda6_row0_col0" class="data row0 col0">Product Title</td>
<td id="T_5bda6_row0_col1" class="data row0 col1">string</td>
</tr>
<tr class="even">
<td id="T_5bda6_row1_col0" class="data row1 col0">Product Category*</td>
<td id="T_5bda6_row1_col1" class="data row1 col1">string</td>
</tr>
<tr class="odd">
<td id="T_5bda6_row2_col0" class="data row2 col0">Product Details/Specs</td>
<td id="T_5bda6_row2_col1" class="data row2 col1">string</td>
</tr>
<tr class="even">
<td id="T_5bda6_row3_col0" class="data row3 col0">Product Cost</td>
<td id="T_5bda6_row3_col1" class="data row3 col1">float</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>For the product category variable - we may add our own manual categorization. <span class="citation" data-cites="percUse">Guha Majumder, Dutta Gupta, and Paul (<a href="references.html#ref-percUse" role="doc-biblioref">2022</a>)</span> manually set the value for this variable. Part of the intent of our research is to seek out means and methods to replace this variable with a continuous scale (ranging from 0 for a “search” good, to a 1 for an “experience” good).</p>
<p>As an initial proxy for this variable and to operationalize it, we leverage a measure of subjectivity for the product - namely how subjective (e.g.&nbsp;how many adverb, adjective, and other word modifiers) are present within the details and specifications of a product. A product that more aligns to a “search” product, we hypothesize, will have fewer modifying words and be oriented toward the facts of the object.</p>
<p>For example, a desk has specific dimensions for length, width, and height, an associated weight, and material from which the desk is made, and possibly some warranty information - all of which are likely to be contained within the product description and specifications. We would characterize such a good as a “search” good (or a 0 on our scale). Leveraging existing language processing tools should allow us to calculate a value for subjectivity in the product’s description and specifications.</p>
<p>Initially, we’ll explore product subjectivity in the combination of the specification and the description, though it may be necessary to explore product subjectivity solely within one of these fields or the other to pursue our modeling.</p>
<div class="cell" data-execution_count="3">
<div id="tbl-data-reqs-ratings" class="cell quarto-float anchored" data-execution_count="3">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-data-reqs-ratings-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.1: Review Data Required
</figcaption>
<div aria-describedby="tbl-data-reqs-ratings-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="3">
<style type="text/css">
</style>

<table id="T_4deee" class="do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_4deee_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Variable</th>
<th id="T_4deee_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Data Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_4deee_row0_col0" class="data row0 col0">Verified Purchase</td>
<td id="T_4deee_row0_col1" class="data row0 col1">boolean</td>
</tr>
<tr class="even">
<td id="T_4deee_row1_col0" class="data row1 col0">Star Rating</td>
<td id="T_4deee_row1_col1" class="data row1 col1">float</td>
</tr>
<tr class="odd">
<td id="T_4deee_row2_col0" class="data row2 col0">Review Content</td>
<td id="T_4deee_row2_col1" class="data row2 col1">string</td>
</tr>
<tr class="even">
<td id="T_4deee_row3_col0" class="data row3 col0">Useful Votes</td>
<td id="T_4deee_row3_col1" class="data row3 col1">integer</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>In <a href="#tbl-data-reqs-ratings" class="quarto-xref">Table&nbsp;<span>2.1</span></a>, we outline the specific datapoints we sought out for reviews across each website. <span class="citation" data-cites="percUse">Guha Majumder, Dutta Gupta, and Paul (<a href="references.html#ref-percUse" role="doc-biblioref">2022</a>)</span> leveraged star rating, review content (specifically the review length), and the number of votes for the review being useful as key measures in their research. To further their work, we plan on exploring the impacts of verified product purchasers and the impact of verification on how useful a review may be to potential customers.</p>
<div class="cell" data-execution_count="4">
<div id="tbl-data-calcs" class="cell quarto-float anchored" data-execution_count="4">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-data-calcs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.2: Additional Calculated Columns, Post Data Collection
</figcaption>
<div aria-describedby="tbl-data-calcs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="4">
<style type="text/css">
</style>

<table id="T_1ac51" class="do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_1ac51_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Variable</th>
<th id="T_1ac51_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Data Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_1ac51_row0_col0" class="data row0 col0">Product Subjectivity</td>
<td id="T_1ac51_row0_col1" class="data row0 col1">float</td>
</tr>
<tr class="even">
<td id="T_1ac51_row1_col0" class="data row1 col0">Review Length (Words)</td>
<td id="T_1ac51_row1_col1" class="data row1 col1">integer</td>
</tr>
<tr class="odd">
<td id="T_1ac51_row2_col0" class="data row2 col0">Review Subjectivity</td>
<td id="T_1ac51_row2_col1" class="data row2 col1">float</td>
</tr>
<tr class="even">
<td id="T_1ac51_row3_col0" class="data row3 col0">Review Polarity</td>
<td id="T_1ac51_row3_col1" class="data row3 col1">float</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Post collection, we added the calculations listed in <a href="#tbl-data-calcs" class="quarto-xref">Table&nbsp;<span>2.2</span></a> to our review data and product data (less reputation score). Each of these calculations will allow us to better understand our underlying data and explore possibilities of where and how each may fit into models for review usefulness.</p>
<p>We have also established a master listing of all products for which we collected data and have associated arbitrary identifiers with the products. In instances where we’ve successfully pulled data for <em>identical</em> products from multiple websites, it can allow us to explore the impact on product and review metrics and investigate the listing site as a treatment variable.</p>
<p>For instance - exploring the impact of review subjectivity, polarity, length, and usefulness, based upon which site the product was listed.</p>
</section>
<section id="data-collection-procedures" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="data-collection-procedures"><span class="header-section-number">2.3</span> Data Collection Procedures</h2>
<p>We wrote code to allow us to gather information from each website. The general process for each e-commerce platform is similar. To alleviate any unnecessary burden for any of these websites, we manually identified URLs to the specific products we sought out to gather, and wrote our code to iterate through those URLs and pull the necessary data and features we sought. This manual identification also allowed us to ensure, in most cases, that we were getting the <em>exact</em> same product during data capture. This hybrid approach enabled higher certainty in getting the same product while also accelerating collection, structuring, and cleaning of product review information.</p>
<ul>
<li><p>Gathering from Amazon (All Products)</p>
<ul>
<li>Product &amp; Review data was scraped from Amazon’s website using Python and Selenium. A Selenium WebDriver was utilized to automate web browser interactions. After navigating to product categories like electronics, home appliances, furniture, books, and grocery, Selenium’s functions were employed to locate review elements. These elements were then parsed and collected, storing the data in a structured format i.e.&nbsp;a CSV file. Pagination handling was implemented to scrape reviews from multiple pages.</li>
</ul></li>
<li><p>Gathering from BestBuy (Electronic Products, Furniture Item(s)? - no grocery or clothing)</p>
<ul>
<li>Just like Target and Amazon, even BestBuy has dynamic content on its web page. We employed Python with Selenium to automate the exploration of product pages, unveiling hidden content, and harvesting essential data. Employing Selenium’s functionalities, we initiated the traversal process, enabling the program to automatically expand pertinent sections to uncover additional information. By targeting elements such as product details and reviews, we orchestrated the seamless extraction of critical fields from each product’s page. This automated approach allowed us to efficiently parse through an extensive array of reviews, ensuring a comprehensive analysis of user feedback for the products under scrutiny. We systematically stored the extracted data in our records tables for further analysis and reference.</li>
</ul></li>
<li><p>Gathering from Target (All products)</p>
<ul>
<li>Target has dynamic content on their webpages. We used Python Selenium to navigate to product pages and automate the selection of items needed to expand sections to reveal additional data. We also automated the process of expanding out all reviews so as to iterate through and parse the content of every review for each product in question.</li>
</ul></li>
</ul>
</section>
<section id="data-exploration" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="data-exploration"><span class="header-section-number">2.4</span> Data Exploration</h2>
<p>After collection and cleaning, we plan to explore our data via visualization, seeking to answer key research questions.</p>
<ul>
<li><p>Is the price of a product higher, given it’s offered on Amazon, BestBuy, or Target? <!--Eliminate?--></p></li>
<li><p>Is a product’s star rating affected by which e-commerce platform is selling it?</p></li>
<li><p>Is there a substantial difference in number of product reviews on one e-commerce platform vs.&nbsp;another?</p></li>
<li><p>Is one e-commerce platform more likely to have input and feedback on reviews (i.e.&nbsp;higher proportion of “this review is helpful” votes to total number of reviews)? <!--Eliminate?--></p></li>
<li><p>What is the difference in the level of detail provided in product descriptions (e.g.&nbsp;for the same product) across each e-commerce platform?</p></li>
<li><p>Do certain product categories perform better on specific platforms? <!--Eliminate?--></p></li>
<li><p>Are users more likely to leave reviews on one platform over another?</p></li>
<li><p>Do customers show different purchasing behaviors based on promotional strategies employed by platforms?</p></li>
</ul>
<p>Structuring our data properly during the collection process will enable us to explore and answer these questions.</p>
</section>
<section id="data-exploration-and-visualization" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="data-exploration-and-visualization"><span class="header-section-number">2.5</span> Data Exploration and Visualization</h2>
<p>For our data exploration, we plan to examine solely the reviews for which we have data from all of our websites. Due to the nature of the vendors, not all offer the same products online. We’ve included some unique products from each site (and may even gather more), but will exclude them from initial analysis.</p>
<p>The common items between all 3 websites include the following:</p>
<div id="607e029d" class="cell" data-execution_count="5">
<div class="cell-output cell-output-display" data-execution_count="5">
<style type="text/css">
</style>

<table id="T_6944c" data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th id="T_6944c_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">product_title</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_6944c_row0_col0" class="data row0 col0">Samsung Galaxy S22 Ultra 5G Unlocked (128GB) Smartphone - Burgundy</td>
</tr>
<tr class="even">
<td id="T_6944c_row1_col0" class="data row1 col0">HP DeskJet 2755e Wireless All-In-One Color Printer, Scanner, Copier with Instant Ink and HP+ (26K67)</td>
</tr>
<tr class="odd">
<td id="T_6944c_row2_col0" class="data row2 col0">JBL Charge 5 Portable Bluetooth Waterproof Speaker - Target Certified Refurbished</td>
</tr>
<tr class="even">
<td id="T_6944c_row3_col0" class="data row3 col0">TurboTax 2023 Deluxe Federal and State Tax Software</td>
</tr>
<tr class="odd">
<td id="T_6944c_row4_col0" class="data row4 col0">Hamilton Beach 4 slice Toaster 24782</td>
</tr>
<tr class="even">
<td id="T_6944c_row5_col0" class="data row5 col0">LG 65" Class 4K UHD 2160p Smart OLED TV - OLED65C3</td>
</tr>
<tr class="odd">
<td id="T_6944c_row6_col0" class="data row6 col0">GE JES1460DSBB 1.4 Cu. Ft. Black Counter Top Microwave</td>
</tr>
<tr class="even">
<td id="T_6944c_row7_col0" class="data row7 col0">Doritos Nacho Cheese Flavored Tortilla Chips - 14.5oz</td>
</tr>
<tr class="odd">
<td id="T_6944c_row8_col0" class="data row8 col0">Crest Cavity &amp; Tartar Protection Toothpaste, Baking Soda &amp; Peroxide - 5.7oz/3pk</td>
</tr>
<tr class="even">
<td id="T_6944c_row9_col0" class="data row9 col0">OXO POP 3pc Plastic Food Storage Container Set Clear</td>
</tr>
<tr class="odd">
<td id="T_6944c_row10_col0" class="data row10 col0">Hogwarts Legacy - Xbox Series X</td>
</tr>
<tr class="even">
<td id="T_6944c_row11_col0" class="data row11 col0">Star Wars Jedi: Survivor - PlayStation 5</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The reason for only examining common products is to check for comparability and similarity of the products associated variables (e.g.&nbsp;product subjectivity, review subjectivity, review polarity, star rating, and so forth) between the websites. If they are similar or comparable, it may mean that we could use single models to make predictions on the usefulness of customer feedback. If they are substantially dissimilar, it may mean that modifiers are needed based upon the e-commerce platform in which the product is listed.</p>
<p>We’ll start by looking at distributions of some of these key variables, and check some of the common trends between them, potentially moving on to hypothesis testing of these variables to check for statistically significant differences.</p>
<section id="univariate-plots-and-distributions" class="level3" data-number="2.5.1">
<h3 data-number="2.5.1" class="anchored" data-anchor-id="univariate-plots-and-distributions"><span class="header-section-number">2.5.1</span> Univariate Plots and Distributions</h3>
<p>First, we want to examine the review content across all websites in a single, simple visual - a Wordcloud. Seeing common words and phrases can prime us for what we might expect to see in more detailed statistical plots.</p>
<div id="cell-fig-wordcloud" class="cell" data-execution_count="6">
<div class="cell-output cell-output-display">
<div id="fig-wordcloud" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-wordcloud-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="data_files/figure-html/fig-wordcloud-output-1.png" width="758" height="409" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-wordcloud-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.1: Wordcloud of review content
</figcaption>
</figure>
</div>
</div>
</div>
<p>Examining the Wordcloud, some larger words stick out (“easy”, “good”, “love”, “need” and “great”). There don’t seem to be very many negative singular words here as it pertains to these reviews. This may suggest that the content of reviews, generally, gravitates toward positivity in reviews. We will proceed to examine this with appropriate statistical plots.</p>
<div id="cell-fig-hist-plots-rating" class="cell" data-execution_count="7">
<div class="cell-output cell-output-display">
<div id="fig-hist-plots-rating" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-hist-plots-rating-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="data_files/figure-html/fig-hist-plots-rating-output-1.png" width="662" height="475" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-hist-plots-rating-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.2: Histogram Plot (star-rating, by-site)
</figcaption>
</figure>
</div>
</div>
</div>
<p>Examining the histogram plots for star-rating by website, we can see that, generally, reviews tend to provide more positive than negative feedback for the selected products, supporting what we see coming out of <a href="#fig-wordcloud" class="quarto-xref">Figure&nbsp;<span>2.1</span></a></p>
<div id="cell-fig-qq-plots-subj" class="cell" data-execution_count="8">
<div class="cell-output cell-output-display">
<div id="fig-qq-plots-subj" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-qq-plots-subj-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="data_files/figure-html/fig-qq-plots-subj-output-1.png" width="662" height="394" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-qq-plots-subj-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.3: Q-Q plots (star-rating, by-site)
</figcaption>
</figure>
</div>
</div>
</div>
<p>Across all three websites, there appears to be consistency with adherence to, and issues with, the normal distribution for subjectivity. These charts suggest sufficient normal distribution of review subjectivity (degree of inclusion of word modifiers such as adverbs and adjectives).</p>
<p>Therre seems to be slight skewness in the tails of these Q-Q distributions. Filtering off some of the outliers may grant us reasonable relevance and assurance to perform hypothesis testing and evaluation of these variables across sites (e.g.&nbsp;ANOVA, F-Testing, etc).</p>
<p>We’ll try plotting the same Q-Q plot with outliers removed. To remove outliers, initially, we leveraged the inter-quartile range of each variable and excluded any records for which the variable was more than <span class="math inline">\(1.5\cdot \text{IQR}\)</span> away from the 1st and 3rd quartiles.</p>
<p>Before we proceed to re-examining the Q-Q plot with outliers removed, we’ll examine boxplots for these variables to examine the prevalence of outliers.</p>
<div id="cell-fig-outliers-star-rating" class="cell" data-execution_count="9">
<div class="cell-output cell-output-display">
<div id="fig-outliers-star-rating" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-outliers-star-rating-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="data_files/figure-html/fig-outliers-star-rating-output-1.png" width="854" height="278" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-outliers-star-rating-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.4: Boxplots - Review Star Rating
</figcaption>
</figure>
</div>
</div>
</div>
<p>Boxplots for star ratings on both Target and Amazon are generally higher with outliers on the lower-end of the 1 to 5 scale. Amazon, however, seems to have a wider spread of information</p>
<div id="cell-fig-outliers-polarity" class="cell" data-execution_count="10">
<div class="cell-output cell-output-display">
<div id="fig-outliers-polarity" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-outliers-polarity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="data_files/figure-html/fig-outliers-polarity-output-1.png" width="854" height="278" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-outliers-polarity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.5: Boxplots - Review Polarity
</figcaption>
</figure>
</div>
</div>
</div>
<p>Boxplots for reviewe polarity suggest common threads between BestBuy and Target in terms of the number summary (min, max, quartiles, and outliers at the lower end). More notably, the polarity (or how positive or negative the content of the reviews are) generally tends toward positive. Amazon, on the otherhand, seems to show a lower center of mass and a narrower spread, with outliers to both extremes for positive and negative polarity.</p>
<p>Next, we’ll examine subjectivity in the same fashion.</p>
<div id="cell-fig-outliers-subjectivity" class="cell" data-execution_count="11">
<div class="cell-output cell-output-display">
<div id="fig-outliers-subjectivity" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-outliers-subjectivity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="data_files/figure-html/fig-outliers-subjectivity-output-1.png" width="854" height="278" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-outliers-subjectivity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.6: Boxplots - Review Subjectivity
</figcaption>
</figure>
</div>
</div>
</div>
<p>Subjectivity, generally, seems to follow the same trends as review polarity. This suggests that these reviews could come from similar or the same population in terms of polarity and subjectivity. Further statistical analysis would be needed to make a definitive determination here.</p>
<p>Now that we’ve examined the centers and spread for these variables and understand where some of their outliers may exist, we’ll examine filtering those outliers from their Q-Q plots.</p>
<p>First - Subjectivity.</p>
<div id="cell-fig-qq-plot-subj-no-out" class="cell" data-execution_count="12">
<div class="cell-output cell-output-display">
<div id="fig-qq-plot-subj-no-out" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-qq-plot-subj-no-out-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="data_files/figure-html/fig-qq-plot-subj-no-out-output-1.png" width="662" height="394" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-qq-plot-subj-no-out-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.7: Q-Q plots (star-rating, by-site, outliers removed)
</figcaption>
</figure>
</div>
</div>
</div>
<p>It seems that our adjustment for outliers sufficiently made corrections for normality across the sites to better adhere to the normal distribution on the lower tail. We may need to make further adjustments on the upper tail to further refine data selection for our training dataset. Amongst the over 34K reviews in the common dataset, approximately 25.4K reviews remain after removing these outliers using this method.</p>
<p>After identifying additional means to filter the data, these methods should suffice in support of using review subjectivity as a feature within various models.</p>
<div id="cell-fig-qq-plots-pol" class="cell" data-execution_count="13">
<div class="cell-output cell-output-display">
<div id="fig-qq-plots-pol" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-qq-plots-pol-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="data_files/figure-html/fig-qq-plots-pol-output-1.png" width="662" height="394" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-qq-plots-pol-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.8: Q-Q plots (star-rating, by-site)
</figcaption>
</figure>
</div>
</div>
</div>
<p>Similar to review subjectivity, review polarity has good adherence to the normal distribution (particularly on the quantile interval of [-2,2]). There are similar issues in the tails of these distributions as exist for review subjectivity.</p>
<p>As such, reduction in outliers may enable us to perform hypothesis testing during our model design and implementation. We’ll examine the same methods of outlier removal as we did for review subjectivity.</p>
<div id="cell-fig-qq-plots-pol-no-out" class="cell" data-execution_count="14">
<div class="cell-output cell-output-display">
<div id="fig-qq-plots-pol-no-out" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-qq-plots-pol-no-out-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="data_files/figure-html/fig-qq-plots-pol-no-out-output-1.png" width="662" height="394" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-qq-plots-pol-no-out-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.9: Q-Q plots (polarity, by-site, oultiers removed)
</figcaption>
</figure>
</div>
</div>
</div>
<p>This method of removal seems to mirror that of review subjectivity, and as such, additional fitration of the dataset will be necessary to enable this feature’s use within various models.</p>
<p>Another key distribution we must understand is that of our targeted response variable - how useful a review is, as voted by other customers. We’ll plot the response as a pure density plot to explore it’s shape.</p>
<div id="cell-fig-helpful-vote-dist" class="cell" data-execution_count="15">
<div class="cell-output cell-output-display">
<div id="fig-helpful-vote-dist" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-helpful-vote-dist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="data_files/figure-html/fig-helpful-vote-dist-output-1.png" width="758" height="374" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-helpful-vote-dist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.10: Distribution of Review Helpful Votes
</figcaption>
</figure>
</div>
</div>
</div>
<p>The black lines represent random samples from the exponential distribution (with <span class="math inline">\(E[X] = 1.9\cdot\bar{V}\)</span> with <span class="math inline">\(\bar{V}\)</span> being the mean for helpful votes within the distribution), and the green lines represent the distribution of helpful votes. It seems that, roughly, the distribution of helpful votes does follow the exponential distribution in the case of Amazon and Target.</p>
<!--

::: {#cell-fig-rand-exp-dist .cell execution_count=16}

::: {.cell-output .cell-output-display}
![Random Exponential Distributions with Means by Site](data_files/figure-html/fig-rand-exp-dist-output-1.png){#fig-rand-exp-dist width=758 height=374}
:::
:::


-->
<p>Examining the plot of <a href="#fig-helpful-vote-dist" class="quarto-xref">Figure&nbsp;<span>2.10</span></a>, the distribution of helpful votes appears to be exponentially distributed on a per-website basis, with many reviews having an expected total count of helpful votes centered fairly low.</p>
<p>Knowing the distribution of our selected response variable will assist us in the modeling process. The nature of the response variable’s distribution may require us to perform transformations on features and responses (e.g.&nbsp;if we pursue a multiple linear regression model).</p>
</section>
<section id="bimultivariate-plots" class="level3" data-number="2.5.2">
<h3 data-number="2.5.2" class="anchored" data-anchor-id="bimultivariate-plots"><span class="header-section-number">2.5.2</span> Bi/Multivariate Plots</h3>
<div id="cell-fig-bivar-plot" class="cell" data-execution_count="17">
<div class="cell-output cell-output-display">
<div id="fig-bivar-plot" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bivar-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="data_files/figure-html/fig-bivar-plot-output-1.png" width="854" height="278" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bivar-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.11: Bivariate Plot for Sensitivity and Polarity, by Site (all purchases)
</figcaption>
</figure>
</div>
</div>
</div>
<div id="cell-fig-bivar-plot2" class="cell" data-execution_count="18">
<div class="cell-output cell-output-display">
<div id="fig-bivar-plot2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bivar-plot2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="data_files/figure-html/fig-bivar-plot2-output-1.png" width="854" height="278" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bivar-plot2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.12: Bivariate Plot for Sensitivity and Polarity, by Site (verified purchases)
</figcaption>
</figure>
</div>
</div>
</div>
<pre><code>* Box Plots</code></pre>
<div id="cell-fig-violin-plots1" class="cell" data-execution_count="19">
<div class="cell-output cell-output-display">
<div id="fig-violin-plots1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-violin-plots1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="data_files/figure-html/fig-violin-plots1-output-1.png" width="851" height="278" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-violin-plots1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.13: Violin Plots of Review Star-Rating vs.&nbsp;Subjectivity, by Site
</figcaption>
</figure>
</div>
</div>
</div>
<div id="cell-fig-violin-plots2" class="cell" data-execution_count="20">
<div class="cell-output cell-output-display">
<div id="fig-violin-plots2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-violin-plots2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="data_files/figure-html/fig-violin-plots2-output-1.png" width="854" height="278" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-violin-plots2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.14: Violin Plots for Star Rating vs.&nbsp;Polarity, by Site
</figcaption>
</figure>
</div>
</div>
</div>
<p>Generally, in <a href="#fig-violin-plots1" class="quarto-xref">Figure&nbsp;<span>2.13</span></a> and <a href="#fig-violin-plots2" class="quarto-xref">Figure&nbsp;<span>2.14</span></a>, we see a trend for the median polarity and subjectivity of each review to increase as the star rating increases. We also see that, generally, the data suggest that we have a minimum of neutral polarity that tends towards positive as star rating increases.</p>
<p>Since both median subjectivity and polarity seem to increase with respect to star rating, such a correlation could be useful to us in multiple linear regression, and is generally useful to us for consideration when pursuing model development.</p>
</section>
<section id="hypothesis-testing-for-key-feature-and-response-variables" class="level3" data-number="2.5.3">
<h3 data-number="2.5.3" class="anchored" data-anchor-id="hypothesis-testing-for-key-feature-and-response-variables"><span class="header-section-number">2.5.3</span> Hypothesis Testing for Key Feature and Response Variables</h3>
<p>Some key features we plan to explore in our modeling include review subjectivity and review polarity. Knowing whether or not there is a significant difference for these features between the websites on which they’re hosted will inform us during model selection, design, and implementation. As such, we’ll perform ANOVA and Tukey Honest Significant Difference Tests on these variables between each site.</p>
<section id="anova-testing" class="level4" data-number="2.5.3.1">
<h4 data-number="2.5.3.1" class="anchored" data-anchor-id="anova-testing"><span class="header-section-number">2.5.3.1</span> ANOVA Testing</h4>
<p>To perform our ANOVA testing, we’ll evaluate each dataset’s review polarity and subjectivity as the mean measure, and the website on which the review was posted as the treatment variable. Prior to performing our one-way ANOVA, we’ll filter the datasets down to eliminate outliers, such that the data may represent the outcomes depicted in <a href="#fig-qq-plot-subj-no-out" class="quarto-xref">Figure&nbsp;<span>2.7</span></a> and <a href="#fig-qq-plots-pol-no-out" class="quarto-xref">Figure&nbsp;<span>2.9</span></a>. An assumption of ANOVA testing is that the source data (and its respective groups) adhere to the normal distribution.</p>
<p>We are leveraging Welch ANOVA and operating under an assumption that the variances between the groups are not equal, as visually evidenced in <a href="#fig-outliers-polarity" class="quarto-xref">Figure&nbsp;<span>2.5</span></a> and <a href="#fig-outliers-subjectivity" class="quarto-xref">Figure&nbsp;<span>2.6</span></a>.</p>
<p>Hypotheses:</p>
<ul>
<li>Test 1:
<ul>
<li><p><span class="math inline">\(H_0: \mu_{\text{Subj,Amazon}}=\mu_{\text{Subj,BestBuy}}=\mu_{\text{Subj,Target}}\)</span></p></li>
<li><p><span class="math inline">\(H_1:\)</span> at least one mean for review subjectivity is different.</p></li>
</ul></li>
<li>Test 2:
<ul>
<li><p><span class="math inline">\(H_0: \mu_{\text{Polr,Amazon}}=\mu_{\text{Polr,BestBuy}}=\mu_{\text{Polr,Target}}\)</span></p></li>
<li><p><span class="math inline">\(H_1:\)</span> at least one mean for review polarity is different.</p></li>
</ul></li>
<li>For both tests, <span class="math inline">\(\alpha=0.003\)</span></li>
</ul>
<div class="cell" data-execution_count="21">
<div id="tbl-welch-anova-polarity" class="cell quarto-float anchored" data-execution_count="21">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-welch-anova-polarity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.3: Welch ANOVA Results (Polarity)
</figcaption>
<div aria-describedby="tbl-welch-anova-polarity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display">
<style type="text/css">
</style>

<table id="T_0ece2" class="do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_0ece2_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Source</th>
<th id="T_0ece2_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">ddof1</th>
<th id="T_0ece2_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">ddof2</th>
<th id="T_0ece2_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">F</th>
<th id="T_0ece2_level0_col4" class="col_heading level0 col4" data-quarto-table-cell-role="th">p-unc</th>
<th id="T_0ece2_level0_col5" class="col_heading level0 col5" data-quarto-table-cell-role="th">np2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_0ece2_row0_col0" class="data row0 col0">site</td>
<td id="T_0ece2_row0_col1" class="data row0 col1">2</td>
<td id="T_0ece2_row0_col2" class="data row0 col2">6112.904850</td>
<td id="T_0ece2_row0_col3" class="data row0 col3">1362.569459</td>
<td id="T_0ece2_row0_col4" class="data row0 col4">0.000000</td>
<td id="T_0ece2_row0_col5" class="data row0 col5">0.106472</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div class="cell" data-execution_count="22">
<div id="tbl-welch-anova-subjectivity" class="cell quarto-float anchored" data-execution_count="22">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-welch-anova-subjectivity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.4: Welch ANOVA Results (Subjectivity)
</figcaption>
<div aria-describedby="tbl-welch-anova-subjectivity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display">
<style type="text/css">
</style>

<table id="T_4468b" class="do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th id="T_4468b_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Source</th>
<th id="T_4468b_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">ddof1</th>
<th id="T_4468b_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">ddof2</th>
<th id="T_4468b_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">F</th>
<th id="T_4468b_level0_col4" class="col_heading level0 col4" data-quarto-table-cell-role="th">p-unc</th>
<th id="T_4468b_level0_col5" class="col_heading level0 col5" data-quarto-table-cell-role="th">np2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_4468b_row0_col0" class="data row0 col0">site</td>
<td id="T_4468b_row0_col1" class="data row0 col1">2</td>
<td id="T_4468b_row0_col2" class="data row0 col2">6353.711848</td>
<td id="T_4468b_row0_col3" class="data row0 col3">368.490784</td>
<td id="T_4468b_row0_col4" class="data row0 col4">0.000000</td>
<td id="T_4468b_row0_col5" class="data row0 col5">0.025819</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>The output of both Welch ANOVA tests suggests that the means for review subjectivity and review polarity, given the website on which it was posted, have a statistically significant difference. We’ll seek to visualize these differences using a plot of the Tukey Honest Significance Test.</p>
</section>
<section id="tukey-tests-with-e-commerce-platform-as-treatment" class="level4" data-number="2.5.3.2">
<h4 data-number="2.5.3.2" class="anchored" data-anchor-id="tukey-tests-with-e-commerce-platform-as-treatment"><span class="header-section-number">2.5.3.2</span> Tukey Tests with E-Commerce Platform as Treatment</h4>
<div id="cell-fig-tukey-tests" class="cell" data-execution_count="23">
<div class="cell-output cell-output-display">
<div id="fig-tukey-tests" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-tukey-tests-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="data_files/figure-html/fig-tukey-tests-output-1.png" width="950" height="566" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-tukey-tests-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.15: Tukey Tests for Star Rating, Polarity, and Subjectivity, by-Site
</figcaption>
</figure>
</div>
</div>
</div>
<p>The Tukey honest significance tests, depicted in <a href="#fig-tukey-tests" class="quarto-xref">Figure&nbsp;<span>2.15</span></a> suggest some interesting patterns between the three websites. Namely, target and best buy seem to have higher polarity, and subjectivity than the same variables for Amazon! Additionally, for each variable and each website, it seems there is no overlap in the variables at the 99.7% confidence level.</p>
<p>These statistically significant differences between the reviews, treated by website, indicate to us that we should proceed with caution in our modeling phase. Namely, it may be necessary to include an explicit variable or feature accounting for the source website in our modeling process as a predictor for the response variable.</p>
<!-- 
### Exploring Sentiments - Star Rating vs. Sentiment Variables

* Inter-Website Comparison of Product Reviews

    * Same Product 

        * Clustering? 

        * Distances?

    * All Products

    * Inspect the following, visually: 
    
        * Product Ratings
        
        * Customer Sentiments **try to score before plotting & turn-in**
        
        * Review Polarity **try to score and store before plotting**
        
        * Naive Bayes Classifier
        
        * Reliability estimates

        * Product description subjectivity scores **try to score and store before turn-in** 
        
        * Average / Spread of number of ratings per product, **try to score and store before turn-in** 
        
        * Average/Spread of Useful Votes per Product Review, **try to score and store before turn-in** 
        
        * Inspection of Data and / or Scoring using Kansei method.

* Will need to take note on if / how these variables conform to some form of statistical distribution (uniform, normal, exponential, etc)

-->
</section>
</section>
</section>
<section id="data-before-after" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="data-before-after"><span class="header-section-number">2.6</span> Data Before / After</h2>
<p>Much of our data cleaning occured during the collection process. Our team took specific steps to pursue cleaning during collection to simplify the process of bringing all information together:</p>
<ul>
<li><p>Using regular expressions to extract key values from text blocks</p></li>
<li><p>Leveraging XPATH, class names, and element IDs to identify HTML fields in which our desired data points resided</p></li>
</ul>
<p>Post-scraping, we had to pursue some additional cleanup</p>
<ul>
<li><p>Removal of unicode characters from review content where possible through coding and scripting.</p></li>
<li><p>Conversion of numbers, stored as strings, to integers (i.e.&nbsp;star ratings, cost/dollar amounts)</p></li>
<li><p>Handling of missing values (i.e.&nbsp;no ratings, no star ratings, no cost listed)</p></li>
</ul>
<p>A particular challenge we came across during the data cleaning process was the handling foreign language reviews, highly repetitive reviews, and misspelled reviews. To better support our calculated measures for subjectivity and polarity, we leveraged the langdetect library to attempt to classify the languages of each of our 45,000+ reviews collected.</p>
<div class="cell" data-execution_count="24">
<div id="tbl-foreign-lang-reviews" class="cell quarto-float anchored" data-execution_count="24">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-foreign-lang-reviews-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.5: Examples of reviews written in foreign languages
</figcaption>
<div aria-describedby="tbl-foreign-lang-reviews-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="24">
<div>


<table class="dataframe do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">site</th>
<th data-quarto-table-cell-role="th">reviewer_name</th>
<th data-quarto-table-cell-role="th">review_content</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>Amazon</td>
<td>Moldea muy bien, me gustó mucho! Es cómodo de ...</td>
<td>En perfectas condiciones, 100% el estado de la...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>Amazon</td>
<td>Diego Sanchez</td>
<td>Todo estuvo muy bien</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">22</td>
<td>Amazon</td>
<td>Daniel831</td>
<td>Llevo un da usndolo y aparecer funciona bien y...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">29</td>
<td>Amazon</td>
<td>Carlos Tocto</td>
<td>Excelente producto y llego bien embalado</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">46</td>
<td>Amazon</td>
<td>Rocio castrellon</td>
<td>Me encanto llego en muy buen estado\nLa vida d...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">20063</td>
<td>BestBuy</td>
<td>Iris</td>
<td>I love Apple, amazing calidad camera and perfe...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">20087</td>
<td>BestBuy</td>
<td>ErickL</td>
<td>Amazing phone:.::::::::::::::..</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">20458</td>
<td>BestBuy</td>
<td>senti</td>
<td>great............................................</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">20569</td>
<td>BestBuy</td>
<td>Jaimerecios25</td>
<td>Very Good Printer yessssssssssssssssssssssssss...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">20709</td>
<td>BestBuy</td>
<td>SilviaC</td>
<td>Excellent product. Excellent price. Will recom...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5482</td>
<td>Target</td>
<td>Do it</td>
<td>Great upgrade for my teens</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7284</td>
<td>Target</td>
<td>daisy78228</td>
<td>good for now.....................................</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7303</td>
<td>Target</td>
<td>Put Jesus first</td>
<td>I don't want to say anything, thank you. I don...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9575</td>
<td>Target</td>
<td>yuenkai</td>
<td>use it all the time, kind of simple to me.aaaa...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11164</td>
<td>Target</td>
<td>A</td>
<td>I just got it it is awesome</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<p>In some cases, the language classification by langdetect was a false negative (i.e.&nbsp;classified as a language other than english, when it was indeed English). In our data exploration, we found that many of these false positives were outliers in other categories (whether for review length, review subjectivity, review polarity, or star rating). As such, we find it prudent to exclude these reviews from our dataset when pursuing model development.</p>
<p>In total, langdetect classified fewer than 440 reviews (accounting for less than 1% of our collected reviews) as being non-English, or being repeated words or gibberish. Excluding these reviews should have minimal impact on the pursuit of model development.</p>
<p>TextBlob also offers us the ability to attempt to correct the spelling of reviews. Due to the amount of time it would take us to pursue spelling corre</p>
<p>Here are some additional examples of gibberish or non-contributional text that impact calculations for review subjectivity and polarity. While some of these could potentially provide value with deeper analysis, we find that these will not contribute significantly to our research.</p>
<div id="bdf9ab63" class="cell" data-execution_count="25">
<div class="cell-output cell-output-display" data-execution_count="25">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">site</th>
<th data-quarto-table-cell-role="th">reviewer_name</th>
<th data-quarto-table-cell-role="th">review_content</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">962</td>
<td>Amazon</td>
<td>Kiran Kumar</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">980</td>
<td>Amazon</td>
<td>Ervey Gomez</td>
<td>'s s s s ! s s s !</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1907</td>
<td>Amazon</td>
<td>Kathya De Alvarenga</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2691</td>
<td>Amazon</td>
<td>Cristopher Leyva</td>
<td>10/10</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2892</td>
<td>Amazon</td>
<td>Amazon Customer</td>
<td>10/10</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2997</td>
<td>Amazon</td>
<td>Joe Zuppardo</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3567</td>
<td>Amazon</td>
<td>HAMZAH ALGHAMDI</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">21293</td>
<td>BestBuy</td>
<td>Andy</td>
<td>: ) : ) : ) : ) ...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">23207</td>
<td>BestBuy</td>
<td>Andy</td>
<td>: ) : ) : ) : ) ...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>We are retaining the totality of the data we’ve collected, and will filter the data based upon our findings here so as to keep the most relevant and supportive data in building our models.</p>
</section>
<section id="insights-from-collection-and-eda" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="insights-from-collection-and-eda"><span class="header-section-number">2.7</span> Insights from Collection and EDA</h2>
<ul>
<li><p>As in <span class="citation" data-cites="percUse">Guha Majumder, Dutta Gupta, and Paul (<a href="references.html#ref-percUse" role="doc-biblioref">2022</a>)</span>, online reviews across multiple websites tend toward positivity (reference polarity and star ratings here).</p></li>
<li><p>Statistically significant differences for review subjectivity, polarity across each of the three websites.</p></li>
<li><p>Exclusion of outliers for one or more categories could result in excluding lower star rating reviews, which could impact model.</p></li>
</ul>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-percUse" class="csl-entry" role="listitem">
Guha Majumder, Madhumita, Sangita Dutta Gupta, and Justin Paul. 2022. <span>“Perceived Usefulness of Online Customer Reviews: A Review Mining Approach Using Machine Learning &amp; Exploratory Data Analysis.”</span> <em>Journal of Business Research</em> 150 (November): 147–64. <a href="https://doi.org/10.1016/j.jbusres.2022.06.012">https://doi.org/10.1016/j.jbusres.2022.06.012</a>.
</div>
<div id="ref-Hu_Gong_Guo_2010" class="csl-entry" role="listitem">
Hu, Weishu, Zhiguo Gong, and Jingzhi Guo. 2010. <span>“Mining Product Features from Online Reviews.”</span> <em>2010 IEEE 7th International Conference on E-Business Engineering</em>, November. <a href="https://doi.org/10.1109/icebe.2010.51">https://doi.org/10.1109/icebe.2010.51</a>.
</div>
<div id="ref-Rajeev_Rekha_2015" class="csl-entry" role="listitem">
Rajeev, P Venkata, and V Smrithi Rekha. 2015. <span>“Recommending Products to Customers Using Opinion Mining of Online Product Reviews and Features.”</span> <em>2015 International Conference on Circuits, Power and Computing Technologies [ICCPCT-2015]</em>, March. <a href="https://doi.org/10.1109/iccpct.2015.7159433">https://doi.org/10.1109/iccpct.2015.7159433</a>.
</div>
<div id="ref-Wang_Li_Tian_Wang_Cheng_2018" class="csl-entry" role="listitem">
Wang, W. M., Z. Li, Z. G. Tian, J. W. Wang, and M. N. Cheng. 2018. <span>“Extracting and Summarizing Affective Features and Responses from Online Product Descriptions and Reviews: A Kansei Text Mining Approach.”</span> <em>Engineering Applications of Artificial Intelligence</em> 73 (August): 149–62. <a href="https://doi.org/10.1016/j.engappai.2018.05.005">https://doi.org/10.1016/j.engappai.2018.05.005</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link  aria-label=" &lt;span="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./models implemented.html" class="pagination-link" aria-label="<span class='chapter-number'>3</span>&nbsp; <span class='chapter-title'>Models Implemented</span>">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Models Implemented</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>